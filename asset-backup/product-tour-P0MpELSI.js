import{r as n,p as N,K as S,aa as k,W as C,I as A,j as t,O as I,V as T,H as p,X as _,ad as $}from"./index-NNgTI0RQ.js";import{P as z}from"./progress-COOXQNiG.js";import{c as P}from"./confetti.module-B5JVzsfH.js";import{S as g}from"./sparkles-yxnOzOhM.js";import{A as R}from"./index-BV8oB33o.js";import{m as i}from"./proxy-C8xz_zGI.js";import{C as Y}from"./chevron-left-BNE8GRv6.js";import{A as B}from"./arrow-right-l9D0Ocf3.js";const r=[{id:"welcome",title:"Welcome to Twealth",description:"Your AI-powered financial command center. Let me show you around in 30 seconds.",position:"center",icon:g},{id:"dashboard",title:"Your Financial Health",description:"See your overall score, key metrics, and AI-powered insights at a glance.",target:'[data-testid="hero-health-score"]',position:"bottom",icon:S},{id:"ai-assistant",title:"AI Financial Advisor",description:"Ask anything about your finances. Get personalized advice from GPT-5 & Claude.",target:'[data-testid="button-view-ai-insights"]',position:"left",icon:k},{id:"quick-actions",title:"Quick Actions",description:"Add transactions, create goals, and track spending with one tap.",target:'[data-testid="fab-add"]',position:"top",icon:C},{id:"complete",title:"You're All Set!",description:"Start by asking the AI a question or setting your first savings goal.",position:"center",icon:A}];function X(){const[m,c]=n.useState(!1),[s,u]=n.useState(0),[e,h]=n.useState(null);N(),n.useEffect(()=>{const o=localStorage.getItem("twealth_tour_completed");if(localStorage.getItem("onboarding_completed")==="true"&&!o){const d=setTimeout(()=>{c(!0)},1500);return()=>clearTimeout(d)}},[]),n.useEffect(()=>{if(!m)return;const o=r[s];if(o.target){const a=document.querySelector(o.target);if(a){const d=a.getBoundingClientRect();h(d),a.scrollIntoView({behavior:"smooth",block:"center"})}else h(null)}else h(null)},[s,m]);const b=n.useCallback(()=>{localStorage.setItem("twealth_tour_completed","true"),c(!1),P({particleCount:100,spread:70,origin:{y:.6},colors:["#3b82f6","#8b5cf6","#22c55e"]})},[]),y=()=>{s<r.length-1?u(s+1):b()},w=()=>{s>0&&u(s-1)},f=()=>{localStorage.setItem("twealth_tour_completed","true"),c(!1)};if(!m)return null;const l=r[s],j=l.icon,x=(s+1)/r.length*100,v=()=>{if(!e||l.position==="center")return{top:"50%",left:"50%",transform:"translate(-50%, -50%)"};const o=16,a=320,d=200;switch(l.position){case"top":return{top:`${e.top-d-o}px`,left:`${e.left+e.width/2}px`,transform:"translateX(-50%)"};case"bottom":return{top:`${e.bottom+o}px`,left:`${e.left+e.width/2}px`,transform:"translateX(-50%)"};case"left":return{top:`${e.top+e.height/2}px`,left:`${e.left-a-o}px`,transform:"translateY(-50%)"};case"right":return{top:`${e.top+e.height/2}px`,left:`${e.right+o}px`,transform:"translateY(-50%)"};default:return{}}};return t.jsx(R,{children:t.jsxs(i.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100]",children:[t.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm",onClick:f}),e&&l.position!=="center"&&t.jsx(i.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute pointer-events-none",style:{top:e.top-8,left:e.left-8,width:e.width+16,height:e.height+16,boxShadow:"0 0 0 9999px rgba(0, 0, 0, 0.6)",borderRadius:"12px"},children:t.jsx(i.div,{animate:{boxShadow:["0 0 0 0 rgba(59, 130, 246, 0.4)","0 0 0 8px rgba(59, 130, 246, 0)"]},transition:{duration:1.5,repeat:1/0},className:"absolute inset-0 rounded-xl border-2 border-primary"})}),t.jsx(i.div,{initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},transition:{type:"spring",damping:25,stiffness:300},style:v(),className:"fixed w-[320px] max-w-[90vw] z-[101]",children:t.jsx(I,{className:"border-primary/30 shadow-2xl overflow-hidden",children:t.jsxs(T,{className:"p-0",children:[t.jsxs("div",{className:"p-5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx(i.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",delay:.1},className:"p-2.5 rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/25",children:t.jsx(j,{className:"w-5 h-5 text-primary-foreground"})}),t.jsxs(p,{variant:"ghost",size:"sm",onClick:f,className:"h-8 text-xs text-muted-foreground hover:text-foreground",children:["Skip tour",t.jsx(_,{className:"w-3 h-3 ml-1"})]})]}),t.jsx(i.h3,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},className:"text-lg font-semibold mb-2",children:l.title}),t.jsx(i.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},className:"text-sm text-muted-foreground mb-4",children:l.description}),t.jsxs("div",{className:"mb-4",children:[t.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground mb-1.5",children:[t.jsxs("span",{children:["Step ",s+1," of ",r.length]}),t.jsxs("span",{children:[Math.round(x),"%"]})]}),t.jsx(z,{value:x,className:"h-1.5"})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[s>0&&t.jsxs(p,{variant:"outline",size:"sm",onClick:w,className:"flex-1",children:[t.jsx(Y,{className:"w-4 h-4 mr-1"}),"Back"]}),t.jsx(p,{size:"sm",onClick:y,className:"flex-1 bg-gradient-to-r from-primary to-primary/80",children:s===r.length-1?t.jsxs(t.Fragment,{children:["Get Started",t.jsx(B,{className:"w-4 h-4 ml-1"})]}):t.jsxs(t.Fragment,{children:["Next",t.jsx($,{className:"w-4 h-4 ml-1"})]})})]})]}),t.jsx("div",{className:"flex justify-center gap-1.5 pb-4",children:r.map((o,a)=>t.jsx(i.button,{onClick:()=>u(a),className:`h-1.5 rounded-full transition-all ${a===s?"w-6 bg-primary":a<s?"w-1.5 bg-primary/50":"w-1.5 bg-muted"}`,whileHover:{scale:1.2}},a))})]})})})]})})}function V(){const[,m]=n.useState(!1),c=()=>{localStorage.removeItem("twealth_tour_completed"),window.location.reload()};return t.jsxs(p,{variant:"outline",size:"sm",onClick:c,className:"text-xs","data-testid":"button-restart-tour",children:[t.jsx(g,{className:"w-3 h-3 mr-1.5"}),"Product Tour"]})}export{X as ProductTour,V as TourTrigger,X as default};
