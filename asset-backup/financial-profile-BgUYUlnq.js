import{c as E,a as T,r as S,g as G,p as R,h as P,j as e,n as h,s as A,t as z,bc as j,v as B,w as p,z as L,I as n,x as w,be as Q,B as K,O,ax as U,q as F,N as Y,o as H,Q as V,R as i}from"./index-B1iCb0U8.js";import{F as D,a as o,b as d,c,d as m,e as x}from"./form-DPq0tMNK.js";import{T as W}from"./trending-down-DnWrfQjq.js";import{S as Z}from"./save-BfndYWoO.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=E("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),$=V({monthlyIncome:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number"),monthlyExpenses:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number"),monthlySavings:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number"),totalSavings:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number"),savingsGoal:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number"),emergencyFund:i().min(1,"Required").refine(a=>!isNaN(Number(a))&&Number(a)>=0,"Must be a valid number")});function te(){var g,v,f,y,N,k;const{toast:a}=T(),[b,u]=S.useState(!1),[J,X]=S.useState("profile"),{data:t,isLoading:I}=G({queryKey:["/api/user/financial-profile"],enabled:!0}),l=R({resolver:O($),defaultValues:{monthlyIncome:"0",monthlyExpenses:"0",monthlySavings:"0",totalSavings:"0",savingsGoal:"0",emergencyFund:"0"},values:t!=null&&t.profile?{monthlyIncome:((g=t.profile.monthlyIncome)==null?void 0:g.toString())||"0",monthlyExpenses:((v=t.profile.monthlyExpenses)==null?void 0:v.toString())||"0",monthlySavings:((f=t.profile.monthlySavings)==null?void 0:f.toString())||"0",totalSavings:((y=t.profile.totalSavings)==null?void 0:y.toString())||"0",savingsGoal:((N=t.profile.savingsGoal)==null?void 0:N.toString())||"0",emergencyFund:((k=t.profile.emergencyFund)==null?void 0:k.toString())||"0"}:void 0}),q=P({mutationFn:async s=>{const r={profile:{monthlyIncome:s.monthlyIncome,monthlyExpenses:s.monthlyExpenses,monthlySavings:s.monthlySavings,totalSavings:s.totalSavings,savingsGoal:s.savingsGoal,emergencyFund:s.emergencyFund}};return H("POST","/api/user/financial-profile",r)},onSuccess:()=>{F.invalidateQueries({queryKey:["/api/user/financial-profile"]}),F.invalidateQueries({queryKey:["/api/financial-health"]}),a({title:"Profile Updated!",description:"Your financial profile has been saved successfully.",icon:e.jsx(Y,{className:"h-5 w-5 text-green-600 dark:text-green-400"})}),u(!1)},onError:s=>{a({title:"Update Failed",description:"Failed to save your profile. Please try again.",variant:"destructive",icon:e.jsx(U,{className:"h-5 w-5"})}),u(!1)}}),C=async s=>{u(!0),q.mutate(s)};return I?e.jsx("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950",children:e.jsx("div",{className:"w-full px-4 py-6 sm:px-6 lg:px-8 xl:px-12 max-w-7xl mx-auto",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"h-16 bg-muted rounded-xl"}),e.jsx("div",{className:"h-96 bg-muted rounded-xl"})]})})}):e.jsxs("div",{className:"min-h-screen bg-slate-50 dark:bg-slate-950",children:[e.jsx("header",{className:"sticky top-0 z-40 border-b bg-white/80 dark:bg-slate-900/80 backdrop-blur-xl border-slate-200/50 dark:border-slate-800/50 shadow-sm",children:e.jsx("div",{className:"w-full px-4 py-4 sm:px-6 lg:px-8 xl:px-12 max-w-7xl mx-auto",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold tracking-tight text-slate-900 dark:text-white",children:"Financial Profile"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600 dark:text-slate-400",children:"Manage your complete financial information"})]})})})}),e.jsxs("main",{className:"w-full px-4 py-6 sm:px-6 lg:px-8 xl:px-12 max-w-7xl mx-auto",children:[e.jsxs(h,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:[e.jsxs(A,{children:[e.jsxs(z,{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5"}),"Financial Overview"]}),e.jsx(B,{children:"Your comprehensive financial profile powers AI-driven advice"})]}),e.jsxs(p,{children:[e.jsx(D,{...l,children:e.jsxs("form",{onSubmit:l.handleSubmit(C),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(o,{control:l.control,name:"monthlyIncome",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Monthly Income"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(L,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"5000","data-testid":"input-monthly-income"})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:l.control,name:"monthlyExpenses",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Monthly Expenses"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"3000","data-testid":"input-monthly-expenses"})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:l.control,name:"monthlySavings",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Monthly Savings"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"2000","data-testid":"input-monthly-savings"})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:l.control,name:"totalSavings",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Total Savings"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(j,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"50000","data-testid":"input-total-savings"})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:l.control,name:"savingsGoal",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Savings Goal"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"100000","data-testid":"input-savings-goal"})]})}),e.jsx(x,{})]})}),e.jsx(o,{control:l.control,name:"emergencyFund",render:({field:s})=>e.jsxs(d,{children:[e.jsx(c,{children:"Emergency Fund"}),e.jsx(m,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-500"}),e.jsx(n,{...s,type:"number",step:"0.01",className:"pl-9",placeholder:"18000","data-testid":"input-emergency-fund"})]})}),e.jsx(x,{})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(K,{type:"submit",disabled:b,className:"bg-slate-900 dark:bg-white text-white dark:text-slate-900 hover:bg-slate-800 dark:hover:bg-slate-100","data-testid":"button-save-profile",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-white border-t-transparent"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Save Profile"]})})})]})}),t&&e.jsxs("div",{className:"mt-8 p-4 bg-slate-50 dark:bg-slate-800 rounded-lg border border-slate-200 dark:border-slate-700",children:[e.jsx("h3",{className:"text-sm font-semibold text-slate-900 dark:text-white mb-2",children:"AI Data Status"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:t.profile?"Your AI assistant uses this authoritative financial data for personalized advice.":"Add your financial information above so the AI can provide accurate, data-driven recommendations."})]})]})]}),(t==null?void 0:t.profile)&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(h,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Monthly Net"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:["$",(parseFloat(t.profile.monthlyIncome||"0")-parseFloat(t.profile.monthlyExpenses||"0")).toLocaleString()]})]}),e.jsx(w,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})}),e.jsx(h,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Savings Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const s=parseFloat(t.profile.monthlyIncome||"0"),r=parseFloat(t.profile.monthlySavings||"0");return s===0?"0.0":(r/s*100).toFixed(1)})(),"%"]})]}),e.jsx(j,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(h,{className:"border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-900",children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Goal Progress"}),e.jsxs("p",{className:"text-2xl font-bold text-slate-900 dark:text-white",children:[(()=>{const s=parseFloat(t.profile.totalSavings||"0"),r=parseFloat(t.profile.savingsGoal||"0");return r===0?"0.0":(s/r*100).toFixed(1)})(),"%"]})]}),e.jsx(M,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})})]})]})]})}export{te as default};
