import{c as Ke,r as v,u as pe,a as ne,j as e,D as le,b as oe,d as de,e as ce,f as me,T as Re,G as ze,g as A,h as P,i as Qe,k as Ve,B as y,l as ue,m as Be,C as te,n as F,o as E,q as $,p as $e,P as he,s as J,S as ae,t as X,v as ee,w as C,x as W,y as fe,A as G,z as U,I as Y,L as De,E as q,F as Ye,H as _e,J as Ue,K as We,M,N as se,O as Ge,Q as Ee,R as O,U as be,V as p,X as He,W as Ze,Y as Je,Z as re,_ as ge,$ as Xe,a0 as es,a1 as Me,a2 as ss,a3 as D,a4 as xe}from"./index-B1iCb0U8.js";import{B as H}from"./badge-BLQt1mrv.js";import{S as ts}from"./scroll-area-WxKb7haM.js";import{A as as}from"./add-funds-form-B3SaNlWF.js";import{E as rs}from"./eye-CR-qYgQM.js";import{T as ns}from"./trash-2-CRPKIWBw.js";import{F as qe,a as K,b as R,c as z,d as Q,e as V}from"./form-DPq0tMNK.js";import{R as is}from"./rocket-CyseJzex.js";import{A as Oe}from"./arrow-left-DHJeeuOn.js";import{Z as je}from"./zap-Dg1ivvH7.js";import{A as ye}from"./award-CtYuvMv3.js";import{A as ls,a as os}from"./arrow-up-right-BxWo8o4Y.js";import"./textarea-BqHY_pYZ.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=Ke("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);function ds({children:f}){const[d,u]=v.useState(!1),[a,r]=v.useState(!1),[n,m]=v.useState(!1),[x,N]=v.useState(null),[o,i]=v.useState(null),[w,T]=v.useState(null),[,h]=pe(),{toast:j}=ne(),l={openTransactionForm:t=>{i(t),u(!0)},openGoalForm:t=>{T(t),r(!0)},openAddFundsForm:(t,c,S,I)=>{N({goalId:t,goalTitle:c,currentAmount:S,targetAmount:I}),m(!0)},navigateToTransactions:t=>{h(t?`/money-tracking?category=${t}`:"/money-tracking"),j({title:"Navigating to Transactions",description:t?`Showing ${t} transactions`:"Viewing all transactions"})},navigateToGoal:t=>{h("/financial-goals"),j({title:"Navigating to Goal",description:"Opening financial goals page"})}},b=()=>{u(!1),i(null),j({title:"Transaction Added",description:"Your transaction has been recorded successfully."})},g=()=>{r(!1),T(null),j({title:"Goal Created",description:"Your financial goal has been created successfully."})},s=()=>{m(!1),N(null)};return e.jsxs(e.Fragment,{children:[f(l),e.jsx(le,{open:d,onOpenChange:u,children:e.jsxs(oe,{className:"max-w-lg",children:[e.jsxs(de,{children:[e.jsx(ce,{children:"Add Transaction"}),e.jsx(me,{children:"Record a new income, expense, or transfer transaction."})]}),e.jsx(Re,{onSuccess:b})]})}),e.jsx(le,{open:a,onOpenChange:r,children:e.jsxs(oe,{className:"max-w-lg",children:[e.jsxs(de,{children:[e.jsx(ce,{children:"Create Financial Goal"}),e.jsx(me,{children:"Set up a new savings goal to track your progress."})]}),e.jsx(ze,{onSuccess:g})]})}),x&&e.jsx(le,{open:n,onOpenChange:m,children:e.jsxs(oe,{className:"max-w-lg",children:[e.jsxs(de,{children:[e.jsx(ce,{children:"Add Funds to Goal"}),e.jsxs(me,{children:['Add money to your"',x.goalTitle,'" goal.']})]}),e.jsx(as,{goalId:x.goalId,goalTitle:x.goalTitle,currentAmount:x.currentAmount,targetAmount:x.targetAmount,onSuccess:s})]})})]})}function cs(){const[f,d]=v.useState(!1),{toast:u}=ne(),{data:a=[],isLoading:r}=A({queryKey:["/api/notifications"],queryFn:()=>fetch("/api/notifications?includeRead=true&limit=20").then(s=>s.json()),refetchInterval:5*60*1e3}),{data:n}=A({queryKey:["/api/notifications/unread-count"],refetchInterval:2*60*1e3}),m=(n==null?void 0:n.count)||0,x=P({mutationFn:s=>E("PUT",`/api/notifications/${s}/read`),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/notifications"]}),$.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),N=P({mutationFn:()=>E("PUT","/api/notifications/mark-all-read"),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/notifications"]}),$.invalidateQueries({queryKey:["/api/notifications/unread-count"]}),u({title:"All notifications marked as read"})}}),o=P({mutationFn:s=>E("DELETE",`/api/notifications/${s}`),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/notifications"]}),$.invalidateQueries({queryKey:["/api/notifications/unread-count"]})}}),i=P({mutationFn:()=>E("POST","/api/notifications/generate"),onSuccess:s=>{$.invalidateQueries({queryKey:["/api/notifications"]}),$.invalidateQueries({queryKey:["/api/notifications/unread-count"]}),s.generated>0&&u({title:`Generated ${s.generated} new notifications`,description:"Check your notification bell for smart suggestions!"})}});v.useEffect(()=>{const s=setTimeout(()=>{i.mutate()},3e3);return()=>clearTimeout(s)},[]);const w=s=>t=>{t.isRead||x.mutate(t.id),t.actionType&&t.actionData&&T(s)({type:t.actionType,data:t.actionData})},T=s=>t=>{var c,S,I;switch(t.type){case"add_transaction":s.openTransactionForm(t.data);break;case"create_goal":s.openGoalForm(t.data);break;case"view_goal":(c=t.data)!=null&&c.goalId&&s.navigateToGoal(t.data.goalId);break;case"view_transactions":s.navigateToTransactions((S=t.data)==null?void 0:S.category);break;case"add_funds":(I=t.data)!=null&&I.goalId&&s.openTransactionForm({type:"transfer",category:"goal_contribution",goalId:t.data.goalId});break}},h=s=>{switch(s){case"urgent":return"bg-red-500";case"high":return"bg-orange-500";case"normal":return"bg-blue-500";case"low":return"bg-gray-500";default:return"bg-blue-500"}},j=s=>{switch(s){case"goals":return"Long-term";case"transactions":return"Money";case"budget":return"Warning";case"achievements":return"Success";case"suggestions":return"Insight";default:return"Info"}},l=s=>{const t=new Date(s),S=Math.floor((new Date().getTime()-t.getTime())/(1e3*60*60));return S<1?"Just now":S<24?`${S}h ago`:`${Math.floor(S/24)}d ago`},b=a.slice(0,10),g=m>0;return e.jsx(ds,{children:s=>{const t=w(s);return e.jsxs(Qe,{open:f,onOpenChange:d,children:[e.jsx(Ve,{asChild:!0,children:e.jsxs(y,{variant:"outline",size:"icon",className:`relative ${g?"ring-2 ring-primary/20":""}`,style:{minWidth:"44px",minHeight:"44px",borderRadius:"var(--radius)"},"data-testid":"button-notifications",children:[e.jsx(ue,{size:16,className:g?"animate-pulse":""}),m>0&&e.jsx(H,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 rounded-full p-0 flex items-center justify-center text-xs font-bold","data-testid":"badge-unread-count",children:m>99?"99+":m})]})}),e.jsxs(Be,{align:"end",className:"w-96 p-0","data-testid":"dropdown-notifications",children:[e.jsxs("div",{className:"p-4 border-b border-border",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-semibold text-lg",children:"Notifications"}),e.jsxs("div",{className:"flex items-center gap-2",children:[m>0&&e.jsxs(y,{variant:"ghost",size:"sm",onClick:()=>N.mutate(),disabled:N.isPending,"data-testid":"button-mark-all-read",children:[e.jsx(te,{size:14,className:"mr-1"}),"Mark all read"]}),e.jsx(y,{variant:"ghost",size:"sm",onClick:()=>i.mutate(),disabled:i.isPending,"data-testid":"button-generate-notifications",children:"Smart Check"})]})]}),m>0&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[m," unread notification",m>1?"s":""]})]}),e.jsx(ts,{className:"h-[384px]",children:r?e.jsx("div",{className:"p-4 text-center text-muted-foreground",children:"Loading notifications..."}):b.length===0?e.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[e.jsx(ue,{size:32,className:"mx-auto mb-2 opacity-50"}),e.jsx("p",{className:"font-medium",children:"No notifications yet"}),e.jsx("p",{className:"text-sm",children:"We'll notify you of important updates"})]}):e.jsx("div",{className:"p-2",children:b.map((c,S)=>e.jsx(F,{className:`p-3 mb-2 cursor-pointer hover:bg-muted/50 border-l-4 ${c.isRead?"border-l-transparent":"bg-primary/5 border-l-primary"}`,onClick:()=>t(c),"data-testid":`notification-${S}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-lg",children:j(c.category)}),e.jsx("div",{className:`w-2 h-2 rounded-full ${h(c.priority)}`})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`font-medium text-sm truncate ${c.isRead?"":"font-semibold"}`,children:c.title}),e.jsx("span",{className:"text-xs text-muted-foreground flex-shrink-0 ml-2",children:l(c.createdAt)})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-2 mb-2",children:c.message}),c.actionType&&e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(y,{size:"sm",variant:"outline",className:"h-6 text-xs px-2",onClick:I=>{I.stopPropagation(),T(s)({type:c.actionType,data:c.actionData})},"data-testid":`button-action-${c.actionType}`,children:[c.actionType==="add_transaction"&&"Add Transaction",c.actionType==="create_goal"&&"Create Goal",c.actionType==="view_goal"&&e.jsxs(e.Fragment,{children:[e.jsx(rs,{size:12,className:"mr-1"}),"View Goal"]}),c.actionType==="view_transactions"&&"View Transactions"]})})]}),e.jsx("div",{className:"flex-shrink-0",children:e.jsx(y,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 text-muted-foreground hover:text-destructive transition-colors",onClick:I=>{I.stopPropagation(),o.mutate(c.id)},"data-testid":`button-delete-${S}`,children:e.jsx(ns,{size:12})})})]})},c.id))})})]})]})}})}const ms=Ee({monthlyIncome:O().min(1,"Monthly income is required"),monthlyExpenses:O().min(1,"Monthly expenses are required")}),xs=Ee({title:O().min(1,"Goal name is required"),targetAmount:O().min(1,"Target amount is required"),targetDate:O().min(1,"Target date is required"),category:O().min(1,"Category is required"),priority:O().default("medium")});function us({onComplete:f}){const[d,u]=v.useState(1),[a,r]=v.useState(null);pe();const{toast:n}=ne(),m=4,x=d/m*100,N=$e({resolver:Ge(ms),defaultValues:{monthlyIncome:"",monthlyExpenses:""}}),o=$e({resolver:Ge(xs),defaultValues:{title:"",targetAmount:"",targetDate:"",category:"savings",priority:"medium"}}),i=P({mutationFn:async l=>E("POST","/api/financial-estimates",{monthlyIncome:parseFloat(l.monthlyIncome),monthlyExpenses:parseFloat(l.monthlyExpenses)}),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/dashboard/stats"]})}}),w=P({mutationFn:async l=>E("POST","/api/financial-goals",{title:l.title,targetAmount:l.targetAmount,currentAmount:"0",targetDate:l.targetDate,category:l.category,priority:l.priority,status:"active"}),onSuccess:()=>{$.invalidateQueries({queryKey:["/api/financial-goals"]}),$.invalidateQueries({queryKey:["/api/dashboard/stats"]})}}),T=async l=>{r(l),await i.mutateAsync(l),u(3)},h=async l=>{await w.mutateAsync(l),u(4)},j=()=>{n({title:"Welcome to Twealth!",description:"Your financial journey starts now. Let's build wealth together!"}),f()};return e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-muted-foreground",children:["Step ",d," of ",m]}),e.jsxs("span",{className:"text-sm font-medium text-primary",children:[Math.round(x),"% Complete"]})]}),e.jsx(he,{value:x,className:"h-2"})]}),d===1&&e.jsxs(F,{className:"border-2 shadow-xl",children:[e.jsxs(J,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-white dark:bg-gray-900 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(ae,{className:"w-8 h-8 text-white"})}),e.jsx(X,{className:"text-3xl font-bold text-foreground",children:"Welcome to Twealth!"}),e.jsx(ee,{className:"text-base mt-2",children:"Your AI-powered CFO advisor for smarter financial decisions"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[e.jsx(W,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Track Everything"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor income, expenses, and financial goals in real-time"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-blue-50 dark:bg-blue-950/20",children:[e.jsx(fe,{className:"w-5 h-5 text-blue-600 dark:text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"AI-Powered Insights"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get CFO-level advice on spending, saving, and investing"})]})]}),e.jsxs("div",{className:"flex items-start gap-3 p-4 rounded-lg bg-green-50 dark:bg-green-950/20",children:[e.jsx(is,{className:"w-5 h-5 text-green-600 dark:text-green-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-sm mb-1",children:"Achieve Your Goals"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set goals, track progress, and reach them faster"})]})]})]}),e.jsx("div",{className:"pt-4",children:e.jsxs(y,{onClick:()=>u(2),className:"w-full bg-primary text-primary-foreground font-semibold h-12","data-testid":"button-start-onboarding",children:["Get Started",e.jsx(G,{className:"ml-2 w-5 h-5"})]})})]})]}),d===2&&e.jsxs(F,{className:"border-2 shadow-xl",children:[e.jsxs(J,{children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(U,{className:"w-6 h-6 text-white"})}),e.jsx(X,{className:"text-center",children:"Tell us about your finances"}),e.jsx(ee,{className:"text-center",children:"This helps us provide personalized advice"})]}),e.jsx(C,{children:e.jsx(qe,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(T),className:"space-y-6",children:[e.jsx(K,{control:N.control,name:"monthlyIncome",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Monthly Income"}),e.jsx(Q,{children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Y,{...l,type:"number",placeholder:"5000",className:"pl-9 h-11","data-testid":"input-monthly-income"})]})}),e.jsx(V,{})]})}),e.jsx(K,{control:N.control,name:"monthlyExpenses",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Monthly Expenses"}),e.jsx(Q,{children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Y,{...l,type:"number",placeholder:"3000",className:"pl-9 h-11","data-testid":"input-monthly-expenses"})]})}),e.jsx(V,{})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(y,{type:"button",variant:"outline",onClick:()=>u(1),className:"flex-1","data-testid":"button-back-step1",children:[e.jsx(Oe,{className:"mr-2 w-4 h-4"}),"Back"]}),e.jsxs(y,{type:"submit",disabled:i.isPending,className:"flex-1 bg-white dark:bg-gray-900","data-testid":"button-continue-step2",children:[i.isPending&&e.jsx(De,{className:"mr-2 h-4 w-4"}),i.isPending?"Saving...":"Continue",!i.isPending&&e.jsx(G,{className:"ml-2 w-4 h-4"})]})]})]})})})]}),d===3&&e.jsxs(F,{className:"border-2 shadow-xl",children:[e.jsxs(J,{children:[e.jsx("div",{className:"mx-auto mb-4 w-12 h-12 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6 text-white"})}),e.jsx(X,{className:"text-center",children:"Set your first goal"}),e.jsx(ee,{className:"text-center",children:"What would you like to achieve? (You can add more goals later)"})]}),e.jsx(C,{children:e.jsx(qe,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(h),className:"space-y-4",children:[e.jsx(K,{control:o.control,name:"title",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Goal Name"}),e.jsx(Q,{children:e.jsx(Y,{...l,placeholder:"Emergency Fund",className:"h-11","data-testid":"input-goal-title"})}),e.jsx(V,{})]})}),e.jsx(K,{control:o.control,name:"targetAmount",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Target Amount"}),e.jsx(Q,{children:e.jsxs("div",{className:"relative",children:[e.jsx(U,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),e.jsx(Y,{...l,type:"number",placeholder:"10000",className:"pl-9 h-11","data-testid":"input-goal-amount"})]})}),e.jsx(V,{})]})}),e.jsx(K,{control:o.control,name:"targetDate",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Target Date"}),e.jsx(Q,{children:e.jsx(Y,{...l,type:"date",className:"h-11",min:new Date().toISOString().split("T")[0],"data-testid":"input-goal-date"})}),e.jsx(V,{})]})}),e.jsx(K,{control:o.control,name:"category",render:({field:l})=>e.jsxs(R,{children:[e.jsx(z,{children:"Category"}),e.jsxs(Ye,{onValueChange:l.onChange,defaultValue:l.value,children:[e.jsx(Q,{children:e.jsx(_e,{className:"h-11","data-testid":"select-goal-category",children:e.jsx(Ue,{placeholder:"Select a category"})})}),e.jsxs(We,{children:[e.jsx(M,{value:"savings",children:"Savings"}),e.jsx(M,{value:"investment",children:"Investment"}),e.jsx(M,{value:"debt",children:"Debt Payoff"}),e.jsx(M,{value:"purchase",children:"Major Purchase"}),e.jsx(M,{value:"travel",children:"Travel"}),e.jsx(M,{value:"education",children:"Education"}),e.jsx(M,{value:"retirement",children:"Retirement"}),e.jsx(M,{value:"other",children:"Other"})]})]}),e.jsx(V,{})]})}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsxs(y,{type:"button",variant:"outline",onClick:()=>u(2),className:"flex-1","data-testid":"button-back-step2",children:[e.jsx(Oe,{className:"mr-2 w-4 h-4"}),"Back"]}),e.jsxs(y,{type:"submit",disabled:w.isPending,className:"flex-1 bg-white dark:bg-gray-900","data-testid":"button-create-goal",children:[w.isPending&&e.jsx(De,{className:"mr-2 h-4 w-4"}),w.isPending?"Creating...":"Create Goal",!w.isPending&&e.jsx(G,{className:"ml-2 w-4 h-4"})]})]})]})})})]}),d===4&&e.jsxs(F,{className:"border-2 shadow-xl",children:[e.jsxs(J,{className:"text-center pb-4",children:[e.jsx("div",{className:"mx-auto mb-4 w-16 h-16 bg-white dark:bg-gray-900 rounded-2xl flex items-center justify-center shadow-lg",children:e.jsx(se,{className:"w-8 h-8 text-white"})}),e.jsx(X,{className:"text-3xl font-bold text-foreground",children:"You're All Set!"}),e.jsx(ee,{className:"text-base mt-2",children:"Your Twealth account is ready. Let's start building wealth!"})]}),e.jsxs(C,{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 rounded-lg bg-white dark:bg-gray-900",children:[e.jsx("h4",{className:"font-semibold mb-3",children:"What's Next?"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx(se,{className:"w-3 h-3 text-white"})}),e.jsx("span",{children:"View your personalized dashboard"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx(se,{className:"w-3 h-3 text-white"})}),e.jsx("span",{children:"Chat with AI for financial advice"})]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-green-500 flex items-center justify-center flex-shrink-0",children:e.jsx(se,{className:"w-3 h-3 text-white"})}),e.jsx("span",{children:"Track transactions and monitor progress"})]})]})]}),e.jsxs(y,{onClick:j,className:"w-full bg-primary text-primary-foreground font-semibold h-12","data-testid":"button-go-to-dashboard",children:[e.jsx(ae,{className:"mr-2 w-5 h-5"}),"Go to Dashboard"]})]})]})]})})}function hs(){const[f,d]=v.useState(!1),[u,a]=v.useState(!1),{data:r}=A({queryKey:["/api/dashboard/stats"]}),{data:n}=A({queryKey:["/api/financial-goals"]});return v.useEffect(()=>{const N=localStorage.getItem("onboarding_completed");a(N==="true")},[]),v.useEffect(()=>{if(u){d(!1);return}if(!r||!n)return;const N=(r==null?void 0:r.monthlyIncome)>0||(r==null?void 0:r.monthlyExpenses)>0||(r==null?void 0:r.totalSavings)>0,o=Array.isArray(n)&&n.length>0;!N&&!o&&d(!0)},[r,n,u]),{showOnboarding:f,completeOnboarding:()=>{localStorage.setItem("onboarding_completed","true"),a(!0),d(!1)},skipOnboarding:()=>{localStorage.setItem("onboarding_completed","true"),a(!0),d(!1)}}}const gs={warning:{bg:"from-orange-500/10 to-red-500/10",border:"border-orange-500/30",icon:"text-orange-500",badge:"bg-orange-500/20 text-orange-600"},opportunity:{bg:"from-green-500/10 to-emerald-500/10",border:"border-green-500/30",icon:"text-green-500",badge:"bg-green-500/20 text-green-600"},celebration:{bg:"from-purple-500/10 to-pink-500/10",border:"border-purple-500/30",icon:"text-purple-500",badge:"bg-purple-500/20 text-purple-600"},upgrade:{bg:"from-blue-500/10 to-primary/10",border:"border-primary/30",icon:"text-primary",badge:"bg-primary/20 text-primary"}};function ps(){const[,f]=pe(),[d,u]=v.useState(new Set),[a,r]=v.useState(0),{data:n}=A({queryKey:["/api/subscription"]}),{data:m}=A({queryKey:["/api/dashboard/stats"]}),{data:x}=A({queryKey:["/api/financial-goals"]}),o=(()=>{var j,l,b;const h=[];if(((j=n==null?void 0:n.plan)==null?void 0:j.name)==="free"){const g=((l=n==null?void 0:n.usage)==null?void 0:l.scoutQueriesUsed)??0,s=((b=n==null?void 0:n.plan)==null?void 0:b.scoutLimit)??50,t=g/s*100;t>=80&&h.push({id:"ai-limit-warning",type:"upgrade",title:t>=100?"AI Query Limit Reached":"Running Low on AI Queries",message:t>=100?"Upgrade to Pro for unlimited AI conversations and premium insights.":`You've used ${g}/${s} queries. Upgrade for unlimited access.`,action:{label:"Upgrade to Pro",href:"/subscription"},icon:Je,priority:1,dismissable:!1})}if(m){const g=m.monthlyIncome??0,s=m.monthlyExpenses??0;s>g&&g>0&&h.push({id:"overspending-warning",type:"warning",title:"Spending Exceeds Income",message:`You're spending $${(s-g).toLocaleString()} more than you earn. Let's fix this.`,action:{label:"Review Spending",href:"/money-tracking"},icon:Ze,priority:2,dismissable:!0});const t=g>0?(g-s)/g*100:0;t>=20&&t<30&&h.push({id:"savings-opportunity",type:"opportunity",title:"Great Savings Rate!",message:`You're saving ${t.toFixed(0)}% of income. A few tweaks could push you to 30%.`,action:{label:"Get AI Tips",href:"/ai-assistant"},icon:W,priority:4,dismissable:!0})}if(Array.isArray(x)){const g=x.filter(s=>s.status==="active");g.forEach(s=>{const t=parseFloat(s.currentAmount||"0")/parseFloat(s.targetAmount)*100;if(t>=90&&t<100&&h.push({id:`goal-almost-${s.id}`,type:"celebration",title:"Almost There!",message:`"${s.title}" is ${t.toFixed(0)}% complete. One final push!`,action:{label:"View Goal",href:"/financial-goals"},icon:q,priority:3,dismissable:!0}),s.targetDate){const c=Math.ceil((new Date(s.targetDate).getTime()-Date.now())/864e5);c<=7&&c>0&&t<80&&h.push({id:`goal-deadline-${s.id}`,type:"warning",title:"Deadline Approaching",message:`"${s.title}" is due in ${c} days with ${t.toFixed(0)}% progress.`,action:{label:"Add Funds",href:"/financial-goals"},icon:ue,priority:2,dismissable:!0})}}),g.length===0&&((m==null?void 0:m.monthlyIncome)??0)>0&&h.push({id:"no-goals",type:"opportunity",title:"Set Your First Goal",message:"Start your savings journey with a clear target. AI can help you plan.",action:{label:"Create Goal",href:"/financial-goals"},icon:fe,priority:5,dismissable:!0})}return h.filter(g=>!d.has(g.id)).sort((g,s)=>g.priority-s.priority)})(),i=o[a];if(v.useEffect(()=>{if(o.length>1){const h=setInterval(()=>{r(j=>(j+1)%o.length)},8e3);return()=>clearInterval(h)}},[o.length]),!i)return null;const w=gs[i.type],T=i.icon;return e.jsx(be,{mode:"wait",children:e.jsx(p.div,{initial:{opacity:0,y:-10,height:0},animate:{opacity:1,y:0,height:"auto"},exit:{opacity:0,y:-10,height:0},transition:{duration:.3,ease:[.4,0,.2,1]},className:"w-full",children:e.jsx(F,{className:`border ${w.border} overflow-hidden`,children:e.jsxs(C,{className:`p-0 bg-gradient-to-r ${w.bg}`,children:[e.jsxs("div",{className:"flex items-center gap-3 p-3 sm:p-4",children:[e.jsx(p.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",damping:15},className:`p-2 rounded-lg bg-background/80 ${w.icon}`,children:e.jsx(T,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("h4",{className:"font-semibold text-sm",children:i.title}),o.length>1&&e.jsxs(H,{variant:"outline",className:"text-[10px] px-1.5",children:[a+1,"/",o.length]})]}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:i.message})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[i.action&&e.jsxs(y,{size:"sm",onClick:()=>f(i.action.href),className:"hidden sm:flex h-8 text-xs","data-testid":`nudge-action-${i.id}`,children:[i.action.label,e.jsx(G,{className:"w-3 h-3 ml-1"})]}),i.dismissable&&e.jsx(y,{variant:"ghost",size:"icon",onClick:()=>u(h=>{const j=new Set(Array.from(h));return j.add(i.id),j}),className:"h-8 w-8 text-muted-foreground hover:text-foreground","data-testid":`nudge-dismiss-${i.id}`,children:e.jsx(He,{className:"w-4 h-4"})})]})]}),o.length>1&&e.jsx("div",{className:"flex gap-1 px-4 pb-2",children:o.map((h,j)=>e.jsx(p.button,{onClick:()=>r(j),className:`h-1 rounded-full transition-all ${j===a?"w-6 bg-foreground/60":"w-2 bg-foreground/20 hover:bg-foreground/40"}`,whileHover:{scale:1.2},whileTap:{scale:.9}},j))})]})})},i.id)})}const Pe={flame:Le,trophy:re,star:ge,zap:je,target:q,trending:W,award:ye};function fs(){const d={origin:{y:.7},zIndex:9999};function u(a,r){Xe({...d,...r,particleCount:Math.floor(100*a)})}u(.25,{spread:26,startVelocity:55,colors:["#ff6b35","#f7c59f"]}),u(.2,{spread:60,colors:["#ffd700","#ff6b35"]}),u(.35,{spread:100,decay:.91,scalar:.8,colors:["#ff6b35","#ffd700","#f7c59f"]}),u(.1,{spread:120,startVelocity:25,decay:.92,scalar:1.2,colors:["#ffd700"]}),u(.1,{spread:120,startVelocity:45,colors:["#ff6b35"]})}function bs(){const[f,d]=v.useState(!1),{toast:u}=ne(),{data:a,isLoading:r}=A({queryKey:["/api/streaks"],staleTime:1e3*60*5}),n=P({mutationFn:async()=>await E("POST","/api/streaks/check-in",{}),onSuccess:o=>{$.invalidateQueries({queryKey:["/api/streaks"]}),o.streakIncreased&&(d(!0),fs(),setTimeout(()=>d(!1),3e3)),u({title:o.streakIncreased?"Streak increased!":"Already checked in today",description:o.streakIncreased?`You're on a ${o.newStreak}-day streak!`:"Come back tomorrow to keep your streak going."})}}),m=()=>{if(!(a!=null&&a.lastCheckIn))return!0;const o=new Date(a.lastCheckIn),i=new Date;return o.toDateString()!==i.toDateString()};if(r)return e.jsx(F,{className:"border-border/40",children:e.jsx(C,{className:"p-4",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-6 bg-muted rounded w-24"}),e.jsx("div",{className:"h-10 bg-muted rounded w-16"})]})})});const x=(a==null?void 0:a.currentStreak)??0,N=(a==null?void 0:a.weeklyProgress)??[!1,!1,!1,!1,!1,!1,!1];return e.jsxs(F,{className:"border-border/40 hover:border-border/60 transition-colors overflow-hidden relative",children:[e.jsx(be,{children:f&&e.jsx(p.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-gradient-to-br from-orange-500/20 to-yellow-500/20 z-10 pointer-events-none"})}),e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p.div,{animate:x>0?{scale:[1,1.1,1],rotate:[0,-5,5,0]}:{},transition:{duration:2,repeat:1/0,repeatType:"reverse"},className:`p-2 rounded-lg ${x>0?"bg-gradient-to-br from-orange-500 to-yellow-500":"bg-muted"}`,children:e.jsx(Le,{className:`w-5 h-5 ${x>0?"text-white":"text-muted-foreground"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground",children:"Daily Streak"}),e.jsxs(p.p,{initial:{scale:1.5,opacity:0},animate:{scale:1,opacity:1},className:"text-2xl font-bold",children:[x,e.jsx("span",{className:"text-sm font-normal text-muted-foreground ml-1",children:"days"})]},x)]})]}),e.jsx(y,{size:"sm",onClick:()=>n.mutate(),disabled:!m()||n.isPending,className:m()?"bg-gradient-to-r from-orange-500 to-yellow-500 hover:from-orange-600 hover:to-yellow-600 text-white shadow-lg shadow-orange-500/25":"","data-testid":"button-check-in",children:n.isPending?e.jsx(p.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:e.jsx(je,{className:"w-4 h-4"})}):m()?e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Check In"]}):e.jsxs(e.Fragment,{children:[e.jsx(te,{className:"w-4 h-4 mr-1"}),"Done"]})})]}),e.jsx("div",{className:"flex items-center gap-1 mt-3",children:["S","M","T","W","T","F","S"].map((o,i)=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("span",{className:"text-[10px] text-muted-foreground",children:o}),e.jsx(p.div,{initial:{scale:0},animate:{scale:1},transition:{delay:i*.05},className:`w-6 h-6 rounded-full flex items-center justify-center ${N[i]?"bg-gradient-to-br from-orange-500 to-yellow-500":"bg-muted"}`,children:N[i]&&e.jsx(te,{className:"w-3 h-3 text-white"})})]},i))}),x>=7&&e.jsx(p.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-3 pt-3 border-t border-border/40",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Best: ",(a==null?void 0:a.longestStreak)??x," days"]})]})})]})]})}function js(){const{data:f}=A({queryKey:["/api/streaks"]}),d=(f==null?void 0:f.achievements)??[],u=d.filter(r=>r.earnedAt),a=d.filter(r=>!r.earnedAt&&r.progress>0);return d.length===0?null:e.jsx(F,{className:"border-border/40",children:e.jsxs(C,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(ye,{className:"w-5 h-5 text-primary"}),e.jsx("h3",{className:"font-semibold",children:"Achievements"}),e.jsxs(H,{variant:"secondary",className:"ml-auto",children:[u.length,"/",d.length]})]}),e.jsx("div",{className:"grid grid-cols-4 sm:grid-cols-6 gap-3",children:d.slice(0,6).map((r,n)=>{const m=Pe[r.icon]||re,x=!!r.earnedAt;return e.jsxs(p.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:n*.05},className:"relative group",children:[e.jsx("div",{className:`aspect-square rounded-xl flex items-center justify-center transition-all ${x?"bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/25":"bg-muted/50 grayscale"}`,children:e.jsx(m,{className:`w-6 h-6 ${x?"text-primary-foreground":"text-muted-foreground"}`})}),!x&&r.progress>0&&e.jsx("div",{className:"absolute -bottom-1 left-1 right-1",children:e.jsx(he,{value:r.progress/r.target*100,className:"h-1"})}),e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-xl"}),e.jsx("p",{className:"relative text-[10px] text-white text-center px-1 font-medium",children:r.title})]})]},r.id)})}),a.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-border/40",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Next achievement"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:(()=>{const r=a[0],n=Pe[r.icon]||re;return e.jsx(n,{className:"w-4 h-4 text-muted-foreground"})})()}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:a[0].title}),e.jsx(he,{value:a[0].progress/a[0].target*100,className:"h-1.5 mt-1"})]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[a[0].progress,"/",a[0].target]})]})]})]})})}function _({value:f,suffix:d="",prefix:u="",decimals:a=0}){const[r,n]=v.useState(0);return v.useEffect(()=>{const x=Date.now(),N=r,o=()=>{const i=Date.now(),w=Math.min((i-x)/1e3,1),T=1-Math.pow(1-w,4),h=N+(f-N)*T;n(h),w<1&&requestAnimationFrame(o)};requestAnimationFrame(o)},[f]),e.jsxs("span",{children:[u,a>0?r.toFixed(a):Math.round(r).toLocaleString(),d]})}function ys(){const f=new Date().getHours();return f<12?"Good morning":f<17?"Good afternoon":"Good evening"}function Ns(f,d){return f>=80?"Outstanding financial discipline. Keep it up!":f>=60?"You're making solid progress toward your goals.":d>15?"Great savings rate! Consider investing the surplus.":"Small steps lead to big changes. Start with one goal."}function Os(){var ke,Se,Ae,Fe,Te,Ce,Ie;const{t:f}=es(),{showOnboarding:d,completeOnboarding:u}=hs(),{data:a,isLoading:r}=A({queryKey:["/api/dashboard/stats"]}),{data:n,isLoading:m}=A({queryKey:["/api/financial-health"]}),{data:x,isLoading:N}=A({queryKey:["/api/financial-goals"]}),{data:o}=A({queryKey:["/api/user-preferences"]}),{data:i}=A({queryKey:["/api/subscription"]}),w=(n==null?void 0:n.overall)??0,T=(n==null?void 0:n.grade)??"Building",h=((Se=(ke=n==null?void 0:n.breakdown)==null?void 0:ke.savingsRate)==null?void 0:Se.value)??0,j=((Fe=(Ae=n==null?void 0:n.breakdown)==null?void 0:Ae.emergencyFund)==null?void 0:Fe.months)??0,l=Array.isArray(x)?x.filter(k=>k.status==="active"):[],b=l.length>0?l[0]:null,g=b?Math.min(100,parseFloat(b.currentAmount||"0")/parseFloat(String(b.targetAmount))*100):0,s=((Te=i==null?void 0:i.plan)==null?void 0:Te.name)??"Free",t=((Ce=i==null?void 0:i.usage)==null?void 0:Ce.scoutQueriesUsed)??0,c=((Ie=i==null?void 0:i.plan)==null?void 0:Ie.scoutLimit)??50,S=c-t,I=(a==null?void 0:a.monthlyIncome)??0,Ne=(a==null?void 0:a.monthlyExpenses)??0,ve=I-Ne,ie=I-parseFloat(String((o==null?void 0:o.monthlyExpensesEstimate)??"0")),Z=ve>=0;if(d)return e.jsx(us,{onComplete:u});const we=v.useMemo(()=>{const k=[];if(j<3&&k.push({icon:ge,title:"Build Emergency Fund",description:`${j.toFixed(1)} months saved. Target: 3-6 months.`,action:"Create Goal",href:"/financial-goals",priority:"high"}),h<20&&ie>0&&k.push({icon:W,title:"Increase Savings Rate",description:`Currently ${h.toFixed(0)}%. Potential: $${ie.toLocaleString()}/mo.`,action:"Optimize",href:"/money-tracking",priority:"medium"}),b&&g<50&&b.targetDate){const L=Math.ceil((new Date(b.targetDate).getTime()-Date.now())/864e5);L>0&&k.push({icon:q,title:`Accelerate "${b.title}"`,description:`${L} days left. ${g.toFixed(0)}% complete.`,action:"Review",href:"/financial-goals",priority:"medium"})}return S>10&&k.push({icon:Me,title:"Get AI Advice",description:`${S} queries available. Ask anything!`,action:"Chat",href:"/ai-assistant",priority:"low"}),k.slice(0,3)},[j,h,ie,b,g,S]),B=(k=>k>=75?{text:"text-emerald-600 dark:text-emerald-400",bg:"bg-emerald-500",light:"bg-emerald-50 dark:bg-emerald-950/30",border:"border-emerald-200 dark:border-emerald-800"}:k>=60?{text:"text-blue-600 dark:text-blue-400",bg:"bg-blue-500",light:"bg-blue-50 dark:bg-blue-950/30",border:"border-blue-200 dark:border-blue-800"}:k>=40?{text:"text-amber-600 dark:text-amber-400",bg:"bg-amber-500",light:"bg-amber-50 dark:bg-amber-950/30",border:"border-amber-200 dark:border-amber-800"}:{text:"text-red-600 dark:text-red-400",bg:"bg-red-500",light:"bg-red-50 dark:bg-red-950/30",border:"border-red-200 dark:border-red-800"})(w);return e.jsxs("div",{className:"min-h-screen-mobile bg-gradient-to-b from-background to-muted/20 pb-20 md:pb-0",children:[e.jsx("header",{className:"bg-background/80 backdrop-blur-xl border-b border-border/40 sticky top-0 z-30",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-3 sm:py-4 lg:py-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs(p.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-semibold tracking-tight text-foreground truncate",children:ys()}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 line-clamp-1 sm:line-clamp-none",children:Ns(w,h)})]})}),e.jsx("div",{className:"flex items-center gap-2 sm:gap-3 flex-shrink-0",children:e.jsx(cs,{})})]})})}),e.jsxs("div",{className:"w-full max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-10 space-y-4 sm:space-y-6 lg:space-y-10",children:[e.jsx(ps,{}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1},children:e.jsx(F,{className:"border-0 shadow-lg sm:shadow-xl bg-gradient-to-br from-white to-gray-50/50 dark:from-gray-900 dark:to-gray-900/50 overflow-hidden",children:e.jsx(C,{className:"p-0",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-0",children:[e.jsxs("div",{className:"p-4 sm:p-6 lg:p-8 xl:p-10",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3 sm:mb-4",children:[e.jsx(H,{className:`${B.light} ${B.text} ${B.border} border text-xs font-medium px-2 sm:px-3 py-0.5 sm:py-1`,children:T}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"AI-Powered Analysis"})]}),e.jsx("h2",{className:"text-xs sm:text-sm lg:text-base font-medium text-muted-foreground mb-2 sm:mb-3",children:"Financial Health Score"}),m?e.jsx(ss,{className:"h-16 sm:h-20 lg:h-24 w-32 sm:w-40"}):e.jsxs("div",{className:"flex items-end gap-2 sm:gap-3 mb-3 sm:mb-4",children:[e.jsx("span",{className:`text-5xl sm:text-6xl lg:text-7xl xl:text-8xl font-bold tracking-tighter ${B.text}`,"data-testid":"hero-health-score",children:e.jsx(_,{value:w})}),e.jsx("span",{className:"text-xl sm:text-2xl lg:text-3xl font-semibold text-muted-foreground/30 mb-1 sm:mb-2",children:"/100"})]}),e.jsx("div",{className:"h-1.5 sm:h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden mb-3 sm:mb-4",children:e.jsx(p.div,{className:`h-full ${B.bg} rounded-full`,initial:{width:0},animate:{width:`${w}%`},transition:{duration:1,delay:.3,ease:"easeOut"}})}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2 sm:line-clamp-none",children:"Based on savings rate, emergency fund, debt ratio, and goal progress"})]}),e.jsxs("div",{className:"bg-gray-50/50 dark:bg-gray-800/30 p-4 sm:p-6 lg:p-8 xl:p-10 border-t lg:border-t-0 lg:border-l border-border/30",children:[e.jsx("h3",{className:"text-xs sm:text-sm font-medium text-muted-foreground mb-4 sm:mb-6",children:"Key Metrics"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 sm:gap-6",children:[e.jsxs(p.div,{className:"space-y-0.5 sm:space-y-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.4},"data-testid":"metric-savings-rate",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-emerald-100 dark:bg-emerald-900/30",children:e.jsx(fe,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Savings Rate"})]}),e.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-foreground",children:e.jsx(_,{value:h,suffix:"%",decimals:1})})]}),e.jsxs(p.div,{className:"space-y-0.5 sm:space-y-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.5},"data-testid":"metric-emergency-fund",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-blue-100 dark:bg-blue-900/30",children:e.jsx(ge,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Emergency Fund"})]}),e.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-foreground",children:e.jsx(_,{value:j,suffix:" mo",decimals:1})})]}),e.jsxs(p.div,{className:"space-y-0.5 sm:space-y-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.6},"data-testid":"metric-cash-flow",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:`p-1 sm:p-1.5 rounded-md ${Z?"bg-emerald-100 dark:bg-emerald-900/30":"bg-red-100 dark:bg-red-900/30"}`,children:Z?e.jsx(ls,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-emerald-600 dark:text-emerald-400"}):e.jsx(os,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-red-600 dark:text-red-400"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Monthly Flow"})]}),e.jsxs("div",{className:`text-xl sm:text-2xl lg:text-3xl font-bold ${Z?"text-emerald-600 dark:text-emerald-400":"text-red-600 dark:text-red-400"}`,children:[Z?"+":"",e.jsx(_,{value:ve,prefix:"$"})]})]}),e.jsxs(p.div,{className:"space-y-0.5 sm:space-y-1",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.3,delay:.7},"data-testid":"metric-goals",children:[e.jsxs("div",{className:"flex items-center gap-1.5 sm:gap-2",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-purple-100 dark:bg-purple-900/30",children:e.jsx(q,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5 text-purple-600 dark:text-purple-400"})}),e.jsx("span",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Active Goals"})]}),e.jsx("div",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-foreground",children:e.jsx(_,{value:l.length})})]})]})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsx(F,{className:"h-full border-border/40 hover:border-border/60 transition-colors",children:e.jsxs(C,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-2 sm:p-2.5 rounded-xl bg-gradient-to-br from-primary to-primary/80 shadow-lg shadow-primary/20",children:e.jsx(ae,{className:"w-4 h-4 sm:w-5 sm:h-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground",children:"AI Insights"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Personalized recommendations"})]})]}),e.jsx("div",{className:"space-y-2 sm:space-y-3",children:e.jsx(be,{children:we.length>0?we.map((k,L)=>e.jsx(p.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.2,delay:L*.1},children:e.jsx(D,{href:k.href,children:e.jsx("button",{className:"w-full text-left p-3 sm:p-4 rounded-xl border border-border/40 hover:border-primary/30 hover:bg-primary/5 transition-all group min-h-[56px] touch-target","data-testid":`ai-step-${L}`,children:e.jsxs("div",{className:"flex items-start gap-2 sm:gap-3",children:[e.jsx("div",{className:`p-1.5 sm:p-2 rounded-lg flex-shrink-0 ${k.priority==="high"?"bg-orange-100 dark:bg-orange-900/30":k.priority==="medium"?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100 dark:bg-gray-800"}`,children:e.jsx(k.icon,{className:`w-3.5 h-3.5 sm:w-4 sm:h-4 ${k.priority==="high"?"text-orange-600 dark:text-orange-400":k.priority==="medium"?"text-blue-600 dark:text-blue-400":"text-muted-foreground"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2 mb-0.5 sm:mb-1",children:[e.jsx("span",{className:"font-medium text-xs sm:text-sm text-foreground truncate",children:k.title}),e.jsx(xe,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-muted-foreground group-hover:translate-x-1 group-hover:text-primary transition-all flex-shrink-0"})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground leading-relaxed line-clamp-2",children:k.description})]})]})})})},L)):e.jsxs(p.div,{className:"text-center py-6 sm:py-8",initial:{opacity:0},animate:{opacity:1},children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-emerald-100 dark:bg-emerald-900/30 flex items-center justify-center mx-auto mb-2 sm:mb-3",children:e.jsx(ye,{className:"w-5 h-5 sm:w-6 sm:h-6 text-emerald-600 dark:text-emerald-400"})}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-foreground",children:"Excellent work!"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1",children:"No urgent actions needed"})]})})}),e.jsx(D,{href:"/ai-assistant",children:e.jsxs(y,{className:"w-full mt-4 sm:mt-6 group min-h-[44px]","data-testid":"button-view-ai-insights",children:[e.jsx(Me,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm sm:text-base",children:"Ask AI Anything"}),e.jsx(G,{className:"w-4 h-4 ml-auto group-hover:translate-x-1 transition-transform"})]})})]})})}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},children:e.jsx(F,{className:"h-full border-border/40 hover:border-border/60 transition-colors",children:e.jsxs(C,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-2 sm:p-2.5 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 shadow-lg shadow-blue-500/20",children:e.jsx(q,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground",children:"Next Goal"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Track your progress"})]})]}),b?e.jsxs("div",{className:"space-y-3 sm:space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-sm sm:text-base text-foreground mb-1 truncate",children:b.title}),e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsxs("span",{className:"text-xl sm:text-2xl font-bold text-foreground",children:["$",parseFloat(b.currentAmount||"0").toLocaleString()]}),e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:["/ $",parseFloat(String(b.targetAmount)).toLocaleString()]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-[10px] sm:text-xs text-muted-foreground mb-1.5 sm:mb-2",children:[e.jsxs("span",{className:"font-medium",children:[g.toFixed(0),"% complete"]}),b.targetDate&&e.jsx("span",{children:new Date(b.targetDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),e.jsx("div",{className:"h-2.5 sm:h-3 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-blue-500 to-blue-600 rounded-full",initial:{width:0},animate:{width:`${Math.min(100,g)}%`},transition:{duration:.8,delay:.4,ease:"easeOut"}})})]}),b.targetDate&&e.jsxs("div",{className:"p-3 sm:p-4 rounded-xl bg-blue-50 dark:bg-blue-950/30 border border-blue-100 dark:border-blue-900/50",children:[e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mb-0.5 sm:mb-1",children:"Monthly contribution needed"}),e.jsxs("p",{className:"text-lg sm:text-xl font-bold text-foreground",children:["$",Math.max(0,(parseFloat(String(b.targetAmount))-parseFloat(b.currentAmount||"0"))/Math.max(1,Math.ceil((new Date(b.targetDate).getTime()-Date.now())/(1e3*60*60*24*30)))).toFixed(0),e.jsx("span",{className:"text-xs sm:text-sm font-normal text-muted-foreground",children:"/month"})]})]}),e.jsx(D,{href:"/financial-goals",children:e.jsxs(y,{variant:"outline",className:"w-full group min-h-[44px]","data-testid":"button-manage-goals",children:[e.jsx("span",{className:"text-sm",children:"Manage Goals"}),e.jsx(G,{className:"w-4 h-4 ml-auto group-hover:translate-x-1 transition-transform"})]})})]}):e.jsxs("div",{className:"text-center py-6 sm:py-8",children:[e.jsx("div",{className:"w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gray-100 dark:bg-gray-800 flex items-center justify-center mx-auto mb-3 sm:mb-4",children:e.jsx(q,{className:"w-5 h-5 sm:w-6 sm:h-6 text-muted-foreground"})}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-foreground mb-1",children:"No active goals"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground mb-4 sm:mb-6",children:"Set a target to start tracking"}),e.jsx(D,{href:"/financial-goals?create=1",children:e.jsxs(y,{className:"w-full min-h-[44px]","data-testid":"button-create-first-goal",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Create First Goal"})]})})]})]})})}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},className:"md:col-span-2 lg:col-span-1",children:e.jsx(F,{className:"h-full border-border/40 hover:border-border/60 transition-colors",children:e.jsxs(C,{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-3 mb-4 sm:mb-6",children:[e.jsx("div",{className:"p-2 sm:p-2.5 rounded-xl bg-gradient-to-br from-violet-500 to-purple-600 shadow-lg shadow-violet-500/20",children:e.jsx(je,{className:"w-4 h-4 sm:w-5 sm:h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-base font-semibold text-foreground",children:"Quick Actions"}),e.jsx("p",{className:"text-[10px] sm:text-xs text-muted-foreground",children:"Common tasks"})]})]}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsx(D,{href:"/money-tracking?add=1",children:e.jsxs(y,{variant:"outline",className:"w-full justify-start h-11 sm:h-12 group touch-target","data-testid":"button-add-transaction",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-emerald-100 dark:bg-emerald-900/30 mr-2 sm:mr-3",children:e.jsx(U,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-emerald-600 dark:text-emerald-400"})}),e.jsx("span",{className:"text-sm",children:"Add Transaction"}),e.jsx(xe,{className:"w-4 h-4 ml-auto group-hover:translate-x-1 transition-transform"})]})}),e.jsx(D,{href:"/money-tracking",children:e.jsxs(y,{variant:"outline",className:"w-full justify-start h-11 sm:h-12 group touch-target","data-testid":"button-view-spending",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-blue-100 dark:bg-blue-900/30 mr-2 sm:mr-3",children:e.jsx(W,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-blue-600 dark:text-blue-400"})}),e.jsx("span",{className:"text-sm",children:"View Spending"}),e.jsx(xe,{className:"w-4 h-4 ml-auto group-hover:translate-x-1 transition-transform"})]})}),e.jsx(D,{href:"/subscription",children:e.jsxs(y,{variant:"outline",className:"w-full justify-start h-11 sm:h-12 group touch-target","data-testid":"button-upgrade-plan",children:[e.jsx("div",{className:"p-1 sm:p-1.5 rounded-md bg-violet-100 dark:bg-violet-900/30 mr-2 sm:mr-3",children:e.jsx(ae,{className:"w-3.5 h-3.5 sm:w-4 sm:h-4 text-violet-600 dark:text-violet-400"})}),e.jsx("span",{className:"text-sm",children:"AI Plan"}),e.jsx(H,{variant:"secondary",className:"ml-auto text-[10px] sm:text-xs",children:s})]})})]}),e.jsxs("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-border/40",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-3",children:[e.jsx("span",{className:"text-xs sm:text-sm font-medium text-foreground",children:"AI Queries"}),e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground",children:[S," remaining"]})]}),e.jsx("div",{className:"h-1.5 sm:h-2 bg-gray-100 dark:bg-gray-800 rounded-full overflow-hidden",children:e.jsx(p.div,{className:"h-full bg-gradient-to-r from-violet-500 to-purple-600 rounded-full",initial:{width:0},animate:{width:`${Math.max(0,S/c*100)}%`},transition:{duration:.6,delay:.5,ease:"easeOut"}})}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground mt-1.5 sm:mt-2",children:[t," of ",c," used this month"]})]})]})})})]}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.5},children:e.jsx(F,{className:"border-border/40 bg-gradient-to-r from-gray-50 to-gray-100/50 dark:from-gray-900/50 dark:to-gray-800/30",children:e.jsx(C,{className:"p-4 sm:p-6 lg:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{className:"w-full sm:w-auto",children:[e.jsx("h3",{className:"text-base sm:text-lg font-semibold text-foreground mb-0.5 sm:mb-1",children:"Explore More"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Access detailed analytics and advanced features"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 sm:gap-3 w-full sm:w-auto",children:[e.jsx(D,{href:"/money-tracking",className:"flex-1 sm:flex-none",children:e.jsxs(y,{variant:"outline",size:"sm",className:"w-full sm:w-auto group min-h-[40px] touch-target","data-testid":"button-view-transactions",children:[e.jsx("span",{className:"text-xs sm:text-sm",children:"Transactions"}),e.jsx(G,{className:"w-3.5 h-3.5 ml-1.5 sm:ml-2 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(D,{href:"/financial-goals",className:"flex-1 sm:flex-none",children:e.jsxs(y,{variant:"outline",size:"sm",className:"w-full sm:w-auto group min-h-[40px] touch-target","data-testid":"button-all-goals",children:[e.jsx("span",{className:"text-xs sm:text-sm",children:"All Goals"}),e.jsx(G,{className:"w-3.5 h-3.5 ml-1.5 sm:ml-2 group-hover:translate-x-1 transition-transform"})]})}),e.jsx(D,{href:"/groups",className:"flex-1 sm:flex-none",children:e.jsxs(y,{variant:"outline",size:"sm",className:"w-full sm:w-auto group min-h-[40px] touch-target","data-testid":"button-groups",children:[e.jsx("span",{className:"text-xs sm:text-sm",children:"Groups"}),e.jsx(G,{className:"w-3.5 h-3.5 ml-1.5 sm:ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.55},children:e.jsx(bs,{})}),e.jsx(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.6},children:e.jsx(js,{})})]})]})]})}export{Os as default};
