import{bE as m,a0 as k,u as C,r as f,g as E,j as t,L as u,B as h,bV as S}from"./index-B1iCb0U8.js";import{l as L}from"./5-removebg-preview_1761748275134-Del8-H30.js";import{A as T}from"./arrow-left-DHJeeuOn.js";import{L as z}from"./lock-bUBjGzQ1.js";import{S as A}from"./shield-DjyqvyHP.js";import{E as _}from"./eye-CR-qYgQM.js";var v={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b=m.createContext&&m.createContext(v),B=["attr","size","title"];function D(e,s){if(e==null)return{};var a=F(e,s),l,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)l=o[r],!(s.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(a[l]=e[l])}return a}function F(e,s){if(e==null)return{};var a={};for(var l in e)if(Object.prototype.hasOwnProperty.call(e,l)){if(s.indexOf(l)>=0)continue;a[l]=e[l]}return a}function x(){return x=Object.assign?Object.assign.bind():function(e){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},x.apply(this,arguments)}function j(e,s){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);s&&(l=l.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),a.push.apply(a,l)}return a}function g(e){for(var s=1;s<arguments.length;s++){var a=arguments[s]!=null?arguments[s]:{};s%2?j(Object(a),!0).forEach(function(l){I(e,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):j(Object(a)).forEach(function(l){Object.defineProperty(e,l,Object.getOwnPropertyDescriptor(a,l))})}return e}function I(e,s,a){return s=M(s),s in e?Object.defineProperty(e,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[s]=a,e}function M(e){var s=G(e,"string");return typeof s=="symbol"?s:s+""}function G(e,s){if(typeof e!="object"||!e)return e;var a=e[Symbol.toPrimitive];if(a!==void 0){var l=a.call(e,s);if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(e)}function N(e){return e&&e.map((s,a)=>m.createElement(s.tag,g({key:a},s.attr),N(s.child)))}function p(e){return s=>m.createElement(H,x({attr:g({},e.attr)},s),N(e.child))}function H(e){var s=a=>{var{attr:l,size:r,title:o}=e,n=D(e,B),d=r||a.size||"1em",c;return a.className&&(c=a.className),e.className&&(c=(c?c+" ":"")+e.className),m.createElement("svg",x({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,l,n,{className:c,style:g(g({color:e.color||a.color},a.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),o&&m.createElement("title",null,o),e.children)};return b!==void 0?m.createElement(b.Consumer,null,a=>s(a)):s(v)}function W(e){return p({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.152 6.896c-.948 0-2.415-1.078-3.96-1.04-2.04.027-3.91 1.183-4.961 3.014-2.117 3.675-.546 9.103 1.519 12.09 1.013 1.454 2.208 3.09 3.792 3.039 1.52-.065 2.09-.987 3.935-.987 1.831 0 2.35.987 3.96.948 1.637-.026 2.676-1.48 3.676-2.948 1.156-1.688 1.636-3.325 1.662-3.415-.039-.013-3.182-1.221-3.22-4.857-.026-3.04 2.48-4.494 2.597-4.559-1.429-2.09-3.623-2.324-4.39-2.376-2-.156-3.675 1.09-4.61 1.09zM15.53 3.83c.843-1.012 1.4-2.427 1.245-3.83-1.207.052-2.662.805-3.532 1.818-.78.896-1.454 2.338-1.273 3.714 1.338.104 2.715-.688 3.559-1.701"},child:[]}]})(e)}function K(e){return p({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M9.101 23.691v-7.98H6.627v-3.667h2.474v-1.58c0-4.085 1.848-5.978 5.858-5.978.401 0 .955.042 1.468.103a8.68 8.68 0 0 1 1.141.195v3.325a8.623 8.623 0 0 0-.653-.036 26.805 26.805 0 0 0-.733-.009c-.707 0-1.259.096-1.675.309a1.686 1.686 0 0 0-.679.622c-.258.42-.374.995-.374 1.752v1.297h3.919l-.386 2.103-.287 1.564h-3.246v8.245C19.396 23.238 24 18.179 24 12.044c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.628 3.874 10.35 9.101 11.647Z"},child:[]}]})(e)}function R(e){return p({attr:{role:"img",viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"},child:[]}]})(e)}function X(){const{t:e}=k(),[,s]=C(),[a,l]=f.useState(null),[r,o]=f.useState(!0),{data:n,isLoading:d,isError:c}=E({queryKey:["/api/auth/providers"],retry:2});f.useEffect(()=>{fetch("/api/auth/status").then(i=>i.json()).then(i=>{i.authenticated&&s("/")}).catch(i=>{console.warn("[Auth] Failed to check auth status:",i.message)}).finally(()=>o(!1))},[s]);const w=()=>{l("google"),window.location.assign("/api/auth/google")},y=()=>{l("facebook"),window.location.assign("/api/auth/facebook")},O=()=>{l("apple");const i=document.createElement("form");i.method="POST",i.action="/api/auth/apple",document.body.appendChild(i),i.submit()},P=(n==null?void 0:n.google)||(n==null?void 0:n.facebook)||(n==null?void 0:n.apple);return r||d?t.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:t.jsx(u,{className:"w-8 h-8 animate-spin text-slate-400"})}):t.jsxs("div",{className:"min-h-screen bg-slate-950",children:[t.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),t.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[t.jsx("header",{className:"px-6 py-4",children:t.jsxs("button",{onClick:()=>s("/"),className:"inline-flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors","data-testid":"button-back-home",children:[t.jsx(T,{className:"w-4 h-4"}),e("login.backToHome")]})}),t.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:t.jsxs("div",{className:"w-full max-w-md",children:[t.jsxs("div",{className:"text-center mb-10",children:[t.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:t.jsx("img",{src:L,alt:"Twealth",className:"w-14 h-14 object-contain"})}),t.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:e("login.title")}),t.jsx("p",{className:"text-slate-400",children:e("login.subtitle")})]}),t.jsx("div",{className:"rounded-2xl border border-slate-700 bg-slate-900 shadow-xl",children:t.jsxs("div",{className:"p-8 space-y-4",children:[c?t.jsxs("div",{className:"text-center py-6",children:[t.jsx("p",{className:"text-red-400 mb-2",children:e("login.unableToLoad")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("login.refreshPage")}),t.jsx(h,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"mt-4 border-slate-600 text-slate-300",children:e("login.refresh")})]}):P?t.jsxs(t.Fragment,{children:[(n==null?void 0:n.google)&&t.jsxs(h,{onClick:w,disabled:a!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-google-login",children:[a==="google"?t.jsx(u,{className:"mr-3 h-4 w-4 animate-spin"}):t.jsx(R,{className:"mr-3 h-4 w-4"}),e("login.google")]}),(n==null?void 0:n.apple)&&t.jsxs(h,{onClick:O,disabled:a!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-apple-login",children:[a==="apple"?t.jsx(u,{className:"mr-3 h-4 w-4 animate-spin"}):t.jsx(W,{className:"mr-3 h-4 w-4"}),e("login.apple")]}),(n==null?void 0:n.facebook)&&t.jsxs(h,{onClick:y,disabled:a!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-facebook-login",children:[a==="facebook"?t.jsx(u,{className:"mr-3 h-4 w-4 animate-spin"}):t.jsx(K,{className:"mr-3 h-4 w-4 text-[#1877F2]"}),e("login.facebook")]})]}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx("p",{className:"text-slate-400 mb-2",children:e("login.authConfiguring")}),t.jsx("p",{className:"text-sm text-slate-500",children:e("login.checkBackSoon")})]}),t.jsxs("div",{className:"relative my-6",children:[t.jsx("div",{className:"absolute inset-0 flex items-center",children:t.jsx(S,{className:"w-full bg-slate-700"})}),t.jsx("div",{className:"relative flex justify-center text-xs",children:t.jsx("span",{className:"bg-slate-900 px-3 text-slate-500",children:e("login.enterpriseSecurity")})})]}),t.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:t.jsx(z,{className:"w-4 h-4 text-slate-400"})}),t.jsx("p",{className:"text-xs text-slate-400",children:e("login.encryption")})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:t.jsx(A,{className:"w-4 h-4 text-slate-400"})}),t.jsx("p",{className:"text-xs text-slate-400",children:e("login.soc2")})]}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:t.jsx(_,{className:"w-4 h-4 text-slate-400"})}),t.jsx("p",{className:"text-xs text-slate-400",children:e("login.gdpr")})]})]})]})}),t.jsxs("div",{className:"mt-8 space-y-4",children:[t.jsxs("p",{className:"text-center text-sm text-slate-400",children:[e("login.newToTwealth")," ",t.jsx("button",{onClick:()=>s("/welcome"),className:"text-white font-medium hover:underline","data-testid":"link-learn-more",children:e("login.learnMore")})]}),t.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-slate-500",children:[t.jsx("button",{onClick:()=>s("/terms"),className:"hover:text-slate-300 transition-colors","data-testid":"link-terms",children:e("login.terms")}),t.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),t.jsx("button",{onClick:()=>s("/privacy"),className:"hover:text-slate-300 transition-colors","data-testid":"link-privacy",children:e("login.privacy")}),t.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),t.jsx("span",{children:e("login.copyright")})]})]})]})})]})]})}export{X as default};
