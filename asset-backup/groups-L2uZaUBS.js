import{r as m,a as te,a5 as ae,aa as be,p as ye,h as A,j as e,ab as N,I as q,ac as H,y as R,E as B,B as v,O as fe,o as V,Q as Ne,ad as K,R as G,ae as we,af as Ce,g as Se,n as S,V as f,D as I,ag as Y,ah as _,b as T,d as F,e as $,f as E,ai as U,x as ke,U as De,F as J,H as W,J as X,K as Z,M as C,S as Ge,aj as Ie,w as re,s as Te,t as Fe,i as $e,k as Ee,m as Me,ak as O,al as Le,z as Oe}from"./index-B1iCb0U8.js";import{T as Pe}from"./textarea-BqHY_pYZ.js";import{C as z}from"./car-DrHqCdV0.js";import{C as Ae}from"./copy-BNMDfCm1.js";import{E as qe}from"./ellipsis-9pnAy1h0.js";import{U as ee}from"./user-plus-DvADGxPs.js";import{T as Ve}from"./trash-2-CRPKIWBw.js";const Ue=Ne({name:G().min(1,"Group name is required"),description:G().optional(),category:K(["house","car","savings","other"]).default("other"),budget:we(t=>t===""||t===void 0||t===null?void 0:String(t),G().optional()),color:G().default("#3B82F6"),status:K(["active","planning","archived"]).default("active")});function se({onSuccess:t}){const[a,x]=m.useState(!1),{toast:r}=te(),u=ae(),{user:i,isLoading:l}=be(),{register:d,handleSubmit:o,setValue:b,watch:h,formState:{errors:g}}=ye({resolver:fe(Ue),defaultValues:{category:"other",color:"#3B82F6",status:"active"}}),p=A({mutationFn:n=>V("POST","/api/groups",n),onSuccess:()=>{u.invalidateQueries({queryKey:["/api/groups"]}),r({title:"Group created",description:"Your shared goal group has been created successfully."}),t==null||t()},onError:n=>{r({title:"Error",description:n.message,variant:"destructive"})},onSettled:()=>{x(!1)}}),j=n=>{if(!i){r({title:"Error",description:"You must be logged in to create a group.",variant:"destructive"});return}x(!0),p.mutate(n)},y=[{value:"house",label:"House / Property",icon:H,description:"Down payment, renovation"},{value:"car",label:"Vehicle",icon:z,description:"Car, motorcycle, boat"},{value:"savings",label:"Group Savings",icon:R,description:"Vacation, event, gift"},{value:"other",label:"Other Goal",icon:B,description:"Custom shared goal"}],k=h("category");return e.jsxs("form",{onSubmit:o(j),className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"name",children:"Group Name"}),e.jsx(q,{id:"name",...d("name"),placeholder:"e.g., Beach House Fund, Tesla Model 3",className:"h-11","data-testid":"input-group-name"}),g.name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:g.name.message})]}),e.jsxs("div",{children:[e.jsx(N,{children:"Goal Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1.5",children:y.map(n=>{const M=n.icon,D=k===n.value;return e.jsxs("button",{type:"button",onClick:()=>b("category",n.value),className:`p-3 rounded-lg border text-left transition-all ${D?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,"data-testid":`button-category-${n.value}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:`w-4 h-4 ${D?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium",children:n.label})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:n.description})]},n.value)})})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"budget",children:"Target Amount (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(q,{id:"budget",type:"number",...d("budget"),placeholder:"0.00",className:"h-11 pl-7","data-testid":"input-group-budget"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set a target to track progress toward your goal"})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Pe,{id:"description",...d("description"),placeholder:"Describe your shared goal...",rows:2,"data-testid":"textarea-group-description"})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(v,{type:"submit",disabled:a||l||!i,className:"min-h-[44px] min-w-[120px]","data-testid":"button-submit-group",children:a?"Creating...":l?"Loading...":"Create Group"})})]})}function ie({value:t,prefix:a="$"}){const[x,r]=m.useState(0);return m.useEffect(()=>{const l=t/40;let d=0;const o=setInterval(()=>{d+=l,d>=t?(r(t),clearInterval(o)):r(d)},800/40);return()=>clearInterval(o)},[t]),e.jsxs("span",{children:[a,Math.round(x).toLocaleString()]})}function He({progress:t,size:a=60}){const[x,r]=m.useState(0),u=5,i=(a-u)/2,l=i*2*Math.PI,d=l-x/100*l;return m.useEffect(()=>{const o=setTimeout(()=>{r(t)},300);return()=>clearTimeout(o)},[t]),e.jsxs("div",{className:"relative",style:{width:a,height:a},children:[e.jsxs("svg",{className:"transform -rotate-90",width:a,height:a,children:[e.jsx("circle",{className:"stroke-muted",strokeWidth:u,fill:"transparent",r:i,cx:a/2,cy:a/2}),e.jsx("circle",{className:"stroke-primary transition-all duration-1000 ease-out",strokeWidth:u,strokeLinecap:"round",fill:"transparent",r:i,cx:a/2,cy:a/2,style:{strokeDasharray:l,strokeDashoffset:d}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold",children:[Math.round(x),"%"]})})]})}function Re({totalAmount:t,memberCount:a,onClose:x}){const[r,u]=m.useState("equal"),[i,l]=m.useState({}),d=a>0?t/a:0,o=(g,p)=>{l(j=>({...j,[g]:parseFloat(p)||0}))},b=Object.values(i).reduce((g,p)=>g+p,0),h=t-b;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary/5 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Amount"}),e.jsxs("p",{className:"text-2xl font-bold text-primary",children:["$",t.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Members"}),e.jsx("p",{className:"text-2xl font-bold",children:a})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(v,{variant:r==="equal"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>u("equal"),children:"Equal Split"}),e.jsx(v,{variant:r==="custom"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>u("custom"),children:"Custom Split"})]}),r==="equal"?e.jsxs("div",{className:"p-4 bg-muted/50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Each person pays:"}),e.jsxs("p",{className:"text-3xl font-bold text-primary",children:["$",d.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:2})]})]}):e.jsxs("div",{className:"space-y-3",children:[[...Array(a)].map((g,p)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-medium",children:p+1}),e.jsx(q,{type:"number",placeholder:"0.00",className:"flex-1",value:i[p]||"",onChange:j=>o(p,j.target.value)})]},p)),h!==0&&e.jsx("p",{className:`text-sm ${h>0?"text-amber-600":"text-red-600"}`,children:h>0?`$${h.toFixed(2)} remaining to assign`:`$${Math.abs(h).toFixed(2)} over the total`})]}),e.jsx(v,{onClick:x,variant:"outline",className:"w-full",children:"Done"})]})}function Be({group:t,onInvite:a,onDelete:x,onContribute:r,delay:u=0}){const i=parseFloat(t.budget||"0"),l=parseFloat(t.currentAmount||"0"),d=i>0?Math.min(100,l/i*100):0,o=Math.max(0,i-l),b=t.memberCount||1,g=(j=>{switch(j){case"house":return H;case"car":return z;case"savings":return R;default:return B}})(t.category),p=j=>{switch(j){case"house":return"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400";case"car":return"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400";case"savings":return"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400";default:return"bg-primary/10 text-primary"}};return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:u},children:e.jsxs(S,{className:"group overflow-hidden border-border/40 hover:shadow-lg hover:border-border transition-all duration-300","data-testid":`card-group-${t.id}`,children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-primary/50 via-primary to-primary/50 transition-all duration-500",style:{clipPath:`inset(0 ${100-d}% 0 0)`}}),e.jsx(Te,{className:"p-4 sm:p-5 pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-11 h-11 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${p(t.category)}`,children:e.jsx(g,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(Fe,{className:"text-base sm:text-lg font-semibold truncate","data-testid":`text-group-name-${t.id}`,children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsxs("span",{children:[b," member",b!==1?"s":""]})]}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{className:"capitalize",children:t.category})]})]})]})]}),e.jsxs($e,{children:[e.jsx(Ee,{asChild:!0,children:e.jsx(v,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(qe,{className:"w-4 h-4"})})}),e.jsxs(Me,{align:"end",children:[e.jsxs(O,{onClick:a,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Invite Members"]}),e.jsxs(O,{onClick:()=>{},children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(O,{onClick:x,className:"text-destructive",children:[e.jsx(Ve,{className:"w-4 h-4 mr-2"}),"Delete Group"]})]})]})]})}),e.jsxs(re,{className:"p-4 sm:p-5 pt-0 space-y-4",children:[i>0&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(He,{progress:d,size:64}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-lg sm:text-xl font-bold text-primary",children:e.jsx(ie,{value:l})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ $",i.toLocaleString()]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["$",o.toLocaleString()," remaining"]}),b>1&&o>0&&e.jsxs("p",{className:"text-xs text-primary font-medium",children:["$",Math.ceil(o/b).toLocaleString(),"/person needed"]})]})]}),t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(v,{variant:"outline",size:"sm",className:"flex-1 h-10 text-xs sm:text-sm",onClick:a,children:[e.jsx(ee,{className:"w-3.5 h-3.5 mr-1.5"}),"Invite"]}),e.jsxs(v,{size:"sm",className:"flex-1 h-10 text-xs sm:text-sm",onClick:r,"data-testid":`button-contribute-${t.id}`,children:[e.jsx(Oe,{className:"w-3.5 h-3.5 mr-1.5"}),"Contribute"]})]})]})]})})}function P({title:t,value:a,icon:x,colorClass:r,delay:u=0}){return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:u},children:e.jsx(S,{className:"border-border/40",children:e.jsx(re,{className:"p-4 sm:p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${r.replace("text-","bg-").replace("600","100").replace("400","900/30")}`,children:e.jsx(x,{className:`w-4 h-4 sm:w-5 sm:h-5 ${r}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${r}`,children:typeof a=="number"?e.jsx(ie,{value:a}):a})]})]})})})})}function Ze(){var Q;const[t,a]=m.useState(!1),[x,r]=m.useState(!1),[u,i]=m.useState(!1),[l,d]=m.useState(null),[o,b]=m.useState(null),[h,g]=m.useState("member"),[p,j]=m.useState("7"),[y,k]=m.useState(null),{toast:n}=te(),M=ae();Ce(),m.useEffect(()=>{new URLSearchParams(window.location.search).get("create")==="1"&&(a(!0),window.history.replaceState({},"","/groups"))},[]);const{data:D,isLoading:ne}=Se({queryKey:["/api/groups"],queryFn:()=>fetch("/api/groups").then(s=>s.json())}),le=A({mutationFn:s=>V("DELETE",`/api/groups/${s}`),onSuccess:()=>{M.invalidateQueries({queryKey:["/api/groups"]}),n({title:"Group deleted",description:"The group has been removed"})},onError:s=>{n({title:"Error",description:s.message,variant:"destructive"})}}),L=A({mutationFn:async({groupId:s,role:c,expiry:ge})=>{const je=parseInt(ge),ve=new Date(Date.now()+je*24*60*60*1e3);return await(await V("POST",`/api/groups/${s}/invites`,{role:c,expiresAt:ve.toISOString()})).json()},onSuccess:s=>{k(s),n({title:"Invite created",description:"Share the link with your group members"})},onError:s=>{n({title:"Error",description:s.message,variant:"destructive"})}}),oe=s=>{confirm("Are you sure you want to delete this group?")&&le.mutate(s)},ce=s=>{d(s),k(null),r(!0)},de=()=>{l&&L.mutate({groupId:l,role:h,expiry:p})},me=()=>{var s;if((s=y==null?void 0:y.invite)!=null&&s.token){const c=`${window.location.origin}/invite/${y.invite.token}`;navigator.clipboard.writeText(c),n({title:"Link copied",description:"Share this link to invite members"})}},xe=s=>{b(s),i(!0)};if(ne)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur border-b border-border/40 sticky top-0 z-30",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsx("div",{className:"h-8 bg-muted/50 rounded-lg w-48 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted/50 rounded w-64 animate-pulse"})]})}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[...Array(3)].map((s,c)=>e.jsx(S,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-muted/50 animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-3 bg-muted/50 rounded w-20 animate-pulse"}),e.jsx("div",{className:"h-5 bg-muted/50 rounded w-24 animate-pulse"})]})]})},c))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((s,c)=>e.jsxs(S,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-muted/50 animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-5 bg-muted/50 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted/50 rounded w-1/2 animate-pulse"})]})]}),e.jsx("div",{className:"h-16 bg-muted/50 rounded-lg animate-pulse mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-muted/50 rounded flex-1 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted/50 rounded flex-1 animate-pulse"})]})]},c))})]})]});const w=D||[],ue=w.reduce((s,c)=>s+parseFloat(c.budget||"0"),0),pe=w.reduce((s,c)=>s+parseFloat(c.currentAmount||"0"),0),he=w.reduce((s,c)=>s+(c.memberCount||1),0);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur border-b border-border/40 sticky top-0 z-30",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 sm:gap-4",children:[e.jsxs(f.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold tracking-tight text-foreground",children:"Shared Goals"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block",children:"Split costs and track contributions with your group"})]}),e.jsx(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:e.jsxs(I,{open:t,onOpenChange:a,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(v,{className:"min-h-[44px] shadow-sm","data-testid":"button-create-group",children:[e.jsx(_,{size:18,className:"sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"New Group"}),e.jsx("span",{className:"sm:hidden",children:"New"})]})}),e.jsxs(T,{className:"w-[95vw] max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx($,{children:"Create Shared Goal Group"}),e.jsx(E,{children:"Create a group to track shared expenses like a house, car, or savings goal"})]}),e.jsx(se,{onSuccess:()=>a(!1)})]})]})})]})})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:w.length===0?e.jsxs(f.div,{className:"text-center py-12 sm:py-20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(U,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-3",children:"Start a Shared Goal"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto text-sm sm:text-base",children:"Create a group to split costs for big purchases like a house, car, or vacation. Track everyone's contributions in one place."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8",children:[{icon:H,title:"House Down Payment",desc:"Split with partner or family",color:"text-blue-600 dark:text-blue-400"},{icon:z,title:"Car Purchase",desc:"Share with co-buyers",color:"text-amber-600 dark:text-amber-400"},{icon:R,title:"Group Savings",desc:"Vacation, event, or gift",color:"text-green-600 dark:text-green-400"}].map((s,c)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2+c*.1},children:e.jsxs(S,{className:"p-4 text-center hover:shadow-md transition-shadow border-border/40",children:[e.jsx(s.icon,{className:`w-8 h-8 mx-auto mb-2 ${s.color}`}),e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.desc})]})},s.title))}),e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.5},children:e.jsxs(I,{open:t,onOpenChange:a,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(v,{size:"lg",className:"min-h-[48px]","data-testid":"button-create-first-group",children:[e.jsx(_,{size:20,className:"mr-2"}),"Create Your First Group"]})}),e.jsxs(T,{className:"w-[95vw] max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx($,{children:"Create Shared Goal Group"}),e.jsx(E,{children:"Create a group to track shared expenses like a house, car, or savings goal"})]}),e.jsx(se,{onSuccess:()=>a(!1)})]})]})})]}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(P,{title:"Total Target",value:ue,icon:B,colorClass:"text-primary",delay:0}),e.jsx(P,{title:"Total Saved",value:pe,icon:ke,colorClass:"text-green-600 dark:text-green-400",delay:.1}),e.jsx(P,{title:"Total Members",value:`${he}`,icon:U,colorClass:"text-blue-600 dark:text-blue-400",delay:.2})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(De,{mode:"popLayout",children:w.map((s,c)=>e.jsx(Be,{group:s,onInvite:()=>ce(s.id),onDelete:()=>oe(s.id),onContribute:()=>xe(s),delay:c*.1},s.id))})})]})}),e.jsx(I,{open:x,onOpenChange:r,children:e.jsxs(T,{className:"w-[95vw] max-w-md",children:[e.jsxs(F,{children:[e.jsx($,{children:"Invite Members"}),e.jsx(E,{children:"Generate a link to invite others to this group"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(N,{htmlFor:"invite-role",className:"text-sm font-medium",children:"Role"}),e.jsxs(J,{value:h,onValueChange:g,children:[e.jsx(W,{id:"invite-role",className:"h-11 mt-1.5","data-testid":"select-invite-role",children:e.jsx(X,{})}),e.jsxs(Z,{children:[e.jsx(C,{value:"member",children:"Member"}),e.jsx(C,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{children:[e.jsx(N,{htmlFor:"invite-expiry",className:"text-sm font-medium",children:"Link Expires In"}),e.jsxs(J,{value:p,onValueChange:j,children:[e.jsx(W,{id:"invite-expiry",className:"h-11 mt-1.5","data-testid":"select-invite-expiry",children:e.jsx(X,{})}),e.jsxs(Z,{children:[e.jsx(C,{value:"1",children:"1 day"}),e.jsx(C,{value:"7",children:"7 days"}),e.jsx(C,{value:"30",children:"30 days"})]})]})]}),y?e.jsxs(f.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-xl border border-border/40",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Invite Link"}),e.jsx("p",{className:"text-sm font-mono break-all text-foreground",children:`${window.location.origin}/invite/${(Q=y.invite)==null?void 0:Q.token}`})]}),e.jsxs(v,{onClick:me,className:"w-full min-h-[44px]",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]}):e.jsx(v,{onClick:de,className:"w-full min-h-[44px]",disabled:L.isPending,children:L.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ge,{className:"w-4 h-4 mr-2"}),"Generate Invite Link"]})})]})]})}),e.jsx(I,{open:u,onOpenChange:i,children:e.jsxs(T,{className:"w-[95vw] max-w-md",children:[e.jsxs(F,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ie,{className:"w-5 h-5"}),"Split Calculator"]}),e.jsx(E,{children:"Calculate how much each person needs to contribute"})]}),o&&e.jsx(Re,{totalAmount:parseFloat(o.budget||"0")-parseFloat(o.currentAmount||"0"),memberCount:o.memberCount||1,onClose:()=>i(!1)})]})})]})}export{Ze as default};
