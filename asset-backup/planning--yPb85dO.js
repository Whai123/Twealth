import{r as G,u as $,g as p,j as e,a1 as v,_ as z,S as B,E as j,n,s as l,t as c,w as d,a3 as x,x as E,B as P,P as o,W as R}from"./index-B1iCb0U8.js";import{E as D}from"./empty-state-B00YxJ5W.js";import{B as f}from"./badge-BLQt1mrv.js";import{T as I,a as Y,b as N,c as b}from"./tabs-BIKejfai.js";import{R as w}from"./rocket-CyseJzex.js";import{A as M}from"./award-CtYuvMv3.js";import{Z as _}from"./zap-Dg1ivvH7.js";import{C as q,L as k}from"./lightbulb-bY4g1OJs.js";import{C as K}from"./calendar-BhxlC1A9.js";import{C}from"./circle-check-big-BvO-LMIQ.js";import{C as O}from"./clock-D17WIfTi.js";import"./message-square-CI5kBZgv.js";function ne(){var y;const[A,S]=G.useState("suggestions"),[,T]=$(),{data:r=[]}=p({queryKey:["/api/financial-goals"],queryFn:()=>fetch("/api/financial-goals").then(s=>s.json())}),{data:g=[]}=p({queryKey:["/api/transactions"],queryFn:()=>fetch("/api/transactions?limit=100").then(s=>s.json())}),{data:H}=p({queryKey:["/api/dashboard/stats"]}),u=(()=>{const s=[];if(r&&r.length>0){const m=r.filter(t=>{const a=Math.ceil((new Date(t.targetDate).getTime()-new Date().getTime())/864e5),i=parseFloat(t.currentAmount)/parseFloat(t.targetAmount)*100;return a<90&&i<75});m.length>0&&s.push({id:"urgent-goals",type:"optimize_goals",title:"Goals Need Attention",description:`You have ${m.length} goal(s) approaching their deadline with less than 75% progress. Consider increasing contributions or adjusting timelines.`,impact:"high",category:"Goals",actionable:!0}),r.filter(t=>parseFloat(t.currentAmount)/parseFloat(t.targetAmount)*100<25&&t.status==="active").length>0&&s.push({id:"low-progress",type:"increase_savings",title:"Boost Your Savings Rate",description:"Some goals have low progress. Consider setting up automatic transfers or finding additional income sources.",impact:"medium",category:"Savings",actionable:!0})}if(g&&g.length>0){const h=g.filter(a=>{const i=new Date(a.date)>new Date(Date.now()-2592e6);return a.type==="expense"&&i}).reduce((a,i)=>(a[i.category]=(a[i.category]||0)+parseFloat(i.amount),a),{}),t=Object.entries(h).sort(([,a],[,i])=>i-a)[0];t&&t[1]>500&&s.push({id:"high-expenses",type:"reduce_expenses",title:"Review High Spending Category",description:`Your highest spending category is ${t[0]} at $${t[1].toLocaleString()} this month. Look for optimization opportunities.`,impact:"medium",category:"Expenses",actionable:!0})}return s.length===0&&(s.push({id:"emergency-fund",type:"increase_savings",title:"Build Emergency Fund",description:"Aim to save 3-6 months of expenses in an emergency fund for financial security.",impact:"high",category:"Savings",actionable:!0}),s.push({id:"automate-savings",type:"optimize_goals",title:"Automate Your Savings",description:"Set up automatic transfers to your savings goals to ensure consistent progress.",impact:"medium",category:"Automation",actionable:!0})),s})(),F=s=>{switch(s){case"high":return"bg-red-100 text-red-800 dark:bg-red-900/20";case"medium":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20";case"low":return"bg-green-100 text-green-800 dark:bg-green-900/20";default:return"bg-gray-100 text-gray-800"}},L=s=>{switch(s){case"high":return e.jsx(R,{className:"text-red-600",size:20});case"medium":return e.jsx(O,{className:"text-yellow-600",size:20});case"low":return e.jsx(C,{className:"text-green-600",size:20});default:return e.jsx(k,{className:"text-blue-600",size:20})}};return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900",children:[e.jsx("header",{className:"bg-blue-50 dark:bg-gray-900 border-b border-gray-200 dark:border-gray-700",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 xl:px-12 py-4 md:py-6",children:e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-600 dark:bg-blue-500 rounded-xl flex items-center justify-center shadow-lg",children:e.jsx(v,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-blue-600 dark:text-blue-400",children:"Smart Financial Planning"}),e.jsx("p",{className:"text-muted-foreground text-lg",children:"AI-powered insights to accelerate your financial success"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:"w-4 h-4 text-yellow-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Planning Score"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:"85/100"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4 text-green-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Active Goals"})]}),e.jsx("div",{className:"text-xl font-bold text-green-600 dark:text-green-400",children:((y=r==null?void 0:r.filter(s=>s.status==="active"))==null?void 0:y.length)||0})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-4 h-4 text-orange-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"Optimization"})]}),e.jsx("div",{className:"text-xl font-bold text-orange-600 dark:text-orange-400",children:"92%"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg p-3 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-foreground",children:"AI Insights"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-600 dark:text-blue-400",children:u.length})]})]})]})})})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 xl:px-12 py-6 md:py-8",children:e.jsxs(I,{value:A,onValueChange:S,className:"space-y-6",children:[e.jsxs(Y,{className:"grid w-full grid-cols-3 bg-white dark:bg-gray-800 p-1 rounded-xl border border-gray-200 dark:border-gray-700",children:[e.jsxs(N,{value:"suggestions","data-testid":"tab-suggestions",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center justify-center gap-1.5 px-2 text-sm",children:[e.jsx(B,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:"Suggestions"}),e.jsx("span",{className:"sm:hidden",children:"Tips"})]}),e.jsxs(N,{value:"insights","data-testid":"tab-insights",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center justify-center gap-1.5 px-2 text-sm",children:[e.jsx(q,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Insights"})]}),e.jsxs(N,{value:"projections","data-testid":"tab-projections",className:"data-[state=active]:bg-blue-500 data-[state=active]:text-white data-[state=active]:shadow-lg flex items-center justify-center gap-1.5 px-2 text-sm",children:[e.jsx(j,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"hidden sm:inline",children:"Projections"}),e.jsx("span",{className:"sm:hidden",children:"Goals"})]})]}),e.jsxs(b,{value:"suggestions",className:"space-y-6",children:[e.jsxs(n,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg transition-all",children:[e.jsxs(l,{className:"pb-4",children:[e.jsxs(c,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(w,{className:"w-6 h-6 text-blue-600"}),"Quick Actions to Boost Your Wealth"]}),e.jsx("p",{className:"text-muted-foreground",children:"Take immediate action to improve your financial position"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(x,{href:"/money-tracking?budget=1",className:"group",children:e.jsxs("div",{className:"bg-primary text-primary-foreground rounded-xl p-6 h-24 flex flex-col justify-center items-center text-center shadow-lg cursor-pointer","data-testid":"button-create-budget",children:[e.jsx(j,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-semibold",children:"Create Budget"})]})}),e.jsx(x,{href:"/financial-goals",className:"group",children:e.jsxs("div",{className:"bg-primary text-primary-foreground rounded-xl p-6 h-24 flex flex-col justify-center items-center text-center shadow-lg cursor-pointer","data-testid":"button-review-goals",children:[e.jsx(E,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-semibold",children:"Review Goals"})]})}),e.jsx(x,{href:"/calendar?create=1",className:"group",children:e.jsxs("div",{className:"bg-primary text-primary-foreground rounded-xl p-6 h-24 flex flex-col justify-center items-center text-center shadow-lg cursor-pointer","data-testid":"button-schedule-review",children:[e.jsx(K,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-semibold",children:"Schedule Review"})]})}),e.jsx(x,{href:"/financial-goals",className:"group",children:e.jsxs("div",{className:"bg-primary text-primary-foreground rounded-xl p-6 h-24 flex flex-col justify-center items-center text-center shadow-lg cursor-pointer","data-testid":"button-optimize-savings",children:[e.jsx(k,{className:"w-6 h-6 mb-2"}),e.jsx("span",{className:"font-semibold",children:"Optimize Savings"})]})})]})})]}),e.jsxs(n,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 shadow-lg transition-all",children:[e.jsxs(l,{className:"pb-4",children:[e.jsxs(c,{className:"text-xl font-bold text-foreground flex items-center gap-2",children:[e.jsx(v,{className:"w-6 h-6 text-blue-600"}),"AI-Powered Recommendations"]}),e.jsx("p",{className:"text-muted-foreground",children:"Smart insights tailored to your financial behavior and goals"})]}),e.jsx(d,{children:u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-green-600 mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"You're doing great!"}),e.jsx("p",{className:"text-muted-foreground",children:"No urgent recommendations at the moment. Keep up the good work with your financial goals."})]}):e.jsx("div",{className:"space-y-4",children:u.map(s=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[L(s.impact),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium","data-testid":`text-suggestion-${s.id}`,children:s.title}),e.jsx(f,{variant:"secondary",className:"text-xs mt-1",children:s.category})]})]}),e.jsxs(f,{className:`text-xs ${F(s.impact)}`,children:[s.impact," impact"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:s.description}),s.actionable&&e.jsx(P,{size:"sm","data-testid":`button-action-${s.id}`,asChild:!0,children:e.jsx(x,{href:"/financial-goals",children:"Take Action"})})]},s.id))})})]})]}),e.jsxs(b,{value:"insights",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs(n,{className:"p-6",children:[e.jsx(l,{className:"p-0 mb-4",children:e.jsx(c,{className:"text-lg font-semibold",children:"Financial Health Score"})}),e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary mb-2","data-testid":"text-health-score",children:"78"}),e.jsx(o,{value:78,className:"h-2 mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Good - Keep improving!"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(l,{className:"p-0 mb-4",children:e.jsx(c,{className:"text-lg font-semibold",children:"Savings Rate"})}),e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2","data-testid":"text-savings-rate",children:"23%"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"of monthly income"}),e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Above recommended 20%"})]})})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(l,{className:"p-0 mb-4",children:e.jsx(c,{className:"text-lg font-semibold",children:"Goal Completion Rate"})}),e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-blue-600 mb-2","data-testid":"text-completion-rate",children:[r?Math.round(r.filter(s=>s.status==="completed").length/r.length*100):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"goals completed on time"})]})})]})]}),e.jsxs(n,{className:"p-6",children:[e.jsx(l,{className:"p-0 mb-4",children:e.jsx(c,{className:"text-lg font-semibold",children:"Spending Analysis"})}),e.jsx(d,{className:"p-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Housing"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:35,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium",children:"35%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Food"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:15,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium",children:"15%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Transportation"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:12,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium",children:"12%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Entertainment"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:8,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium",children:"8%"})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm",children:"Other"}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{value:30,className:"w-24 h-2"}),e.jsx("span",{className:"text-sm font-medium",children:"30%"})]})]})]})})]})]}),e.jsx(b,{value:"projections",className:"space-y-6",children:e.jsxs(n,{className:"p-6",children:[e.jsx(l,{className:"p-0 mb-4",children:e.jsx(c,{className:"text-lg font-semibold",children:"Goal Timeline Projections"})}),e.jsx(d,{className:"p-0",children:r&&r.length>0?e.jsx("div",{className:"space-y-6",children:r.filter(s=>s.status==="active").map(s=>{const m=parseFloat(s.currentAmount)/parseFloat(s.targetAmount)*100,h=parseFloat(s.targetAmount)-parseFloat(s.currentAmount),t=Math.ceil((new Date(s.targetDate).getTime()-new Date().getTime())/(1e3*60*60*24)),a=h/Math.max(1,t/30);return e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsx("h4",{className:"font-medium","data-testid":`text-projection-${s.id}`,children:s.title}),e.jsx(f,{variant:t>0?"secondary":"destructive",children:t>0?`${t} days left`:"Overdue"})]}),e.jsx(o,{value:m,className:"h-2 mb-3"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Current Progress"}),e.jsxs("p",{className:"font-medium",children:["$",parseFloat(s.currentAmount).toLocaleString()," (",Math.round(m),"%)"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Monthly Target"}),e.jsxs("p",{className:"font-medium ${monthlyNeeded > 1000 ? 'text-red-600' : 'text-green-600'}",children:["$",a.toLocaleString()]})]})]}),a>1e3&&e.jsxs("div",{className:"mt-3 p-2 bg-red-50 dark:bg-red-900/20 rounded text-sm text-red-700 dark:text-red-300",children:["You need to save $",a.toLocaleString(),"/month to reach this goal on time"]})]},s.id)})}):e.jsx(D,{icon:j,title:"No Active Goals",description:"Create a financial goal to see projections and track your progress toward achieving it.",actionLabel:"Create Your First Goal",onAction:()=>T("/financial-goals?create=1"),actionTestId:"button-create-goal-from-planning"})})]})})]})})]})}export{ne as default};
