const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/csv-analysis-panel-BBNc9JZB.js","assets/index-NNgTI0RQ.js","assets/index-ZNClOMUw.css","assets/textarea-CFY__GU9.js","assets/table-DCuZy44m.js","assets/alert-BWRao83W.js","assets/save-BWhGKkwC.js","assets/trending-up-BnP5NHLE.js","assets/index-hdTjj1pu.js"])))=>i.map(i=>d[i]);
import{c as Q,r as g,a6 as ue,j as e,O as C,Q as _,S as G,V as R,K as Fe,J as Oe,Y as te,q as rs,y as be,z as ee,E as Te,B as se,aa as is,s as De,ap as ls,H as q,aq as cs,t as Ae,v as _e,w as Ge,ak as Ee,$ as Ne,a0 as ve,a1 as we,a2 as Se,a3 as U,Z,_ as He,o as me,aI as Ts,aJ as Es,aK as zs,aL as os,aM as Ds,X as As,aN as ds,aO as ms,aP as us,T as Ue,a8 as Is,ae as Ps,L as Ls,M as Os,N as Bs,af as Rs,aQ as $s,aR as Vs,W as he,U as qs,a5 as ae,aS as _s,aT as Gs,al as Hs}from"./index-NNgTI0RQ.js";import{a as Us,C as Ws,E as xs,B as Ks}from"./addMonths-C4oyVVPj.js";import{T as Qs,a as Ys,b as ne,c as re}from"./tabs-a-uRWqhW.js";import{F as Zs,a as ie,b as le,c as ce,d as oe,e as de}from"./form-DeqjsDZl.js";import{B as V}from"./badge-D7Q8E7hz.js";import{P as ps}from"./progress-COOXQNiG.js";import{t as Be,c as Js,g as Xs,s as We}from"./startOfWeek-D6dzzDOw.js";import{A as Re,a as $e}from"./arrow-up-right-CEJk2rBh.js";import{C as hs}from"./calendar-CwD0FHKB.js";import{T as W}from"./trending-up-BnP5NHLE.js";import{C as Ve}from"./chart-column-CHgS_Ivl.js";import{C as ge}from"./circle-check-big-DIqrf9ZE.js";import{e as et}from"./endOfMonth-AzK47_pP.js";import{P as Me}from"./piggy-bank-Bku1OXn_.js";import{T as st}from"./trash-2-iBqgHWxY.js";import{Z as ke}from"./zap-jVm97dbR.js";import{A as gs}from"./award-cHD21S_y.js";import{T as fe}from"./trending-down-PHmIWxHk.js";import{L as Ie}from"./lightbulb-DBIXkFLe.js";import{A as Ke}from"./arrow-right-l9D0Ocf3.js";import{S as Pe}from"./sparkles-yxnOzOhM.js";import{u as fs,a as tt,M as at,b as nt,f as rt,c as it,i as lt,d as ze,e as ct,g as ot,h as dt,r as mt,j as ut,k as xt,l as pt,n as js,o as ht,p as gt,q as ft,s as jt,t as yt,V as bt,v as Nt,w as vt,S as wt,H as St,x as Ce,y as kt,z as Ct,A as Ft,G as Mt,m as B}from"./proxy-C8xz_zGI.js";import{A as ys}from"./index-BV8oB33o.js";import{F as Tt,S as Et}from"./save-BWhGKkwC.js";import{B as Qe}from"./building-2-BMcy1mLL.js";import{C as bs}from"./credit-card-BRwojsv2.js";import{G as zt}from"./gift-DelZ40eJ.js";import{C as Dt}from"./car-CQIjq09O.js";import"./bell-B71JwlkR.js";import"./message-square-T3TIwvoE.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=Q("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const At=Q("Coffee",[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ze=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const It=Q("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=Q("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lt=Q("Plane",[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ot=Q("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bt=Q("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]]);function Ns(s){const t=fs(()=>tt(s)),{isStatic:a}=g.useContext(at);if(a){const[,n]=g.useState(s);g.useEffect(()=>t.on("change",n),[])}return t}function vs(s,t){const a=Ns(t()),n=()=>a.set(t());return n(),nt(()=>{const i=()=>rt.preRender(n,!1,!0),c=s.map(m=>m.on("change",i));return()=>{c.forEach(m=>m()),it(n)}}),a}const Rt=s=>s&&typeof s=="object"&&s.mix,$t=s=>Rt(s)?s.mix:void 0;function Vt(...s){const t=!Array.isArray(s[0]),a=t?0:-1,n=s[0+a],i=s[1+a],c=s[2+a],m=s[3+a],p=lt(i,c,{mixer:$t(c[0]),...m});return t?p(n):p}function qt(s){ze.current=[],s();const t=vs(ze.current,s);return ze.current=void 0,t}function Xe(s,t,a,n){if(typeof s=="function")return qt(s);const i=typeof t=="function"?t:Vt(t,a,n);return Array.isArray(s)?es(s,i):es([s],([c])=>i(c))}function es(s,t){const a=fs(()=>[]);return vs(s,()=>{a.length=0;const n=s.length;for(let i=0;i<n;i++)a[i]=s[i].get();return t(a)})}function _t(s,t=100,a){const n=a({...s,keyframes:[0,t]}),i=Math.min(ct(n),ot);return{type:"keyframes",ease:c=>n.next(i*c).value/t,duration:dt(i)}}function qe(s){return typeof s=="object"&&!Array.isArray(s)}function ws(s,t,a,n){return typeof s=="string"&&qe(t)?mt(s,a,n):s instanceof NodeList?Array.from(s):Array.isArray(s)?s:[s]}function ss(s,t,a,n){var i;return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,s+parseFloat(t)):t==="<"?a:(i=n.get(t))!==null&&i!==void 0?i:s}const Gt=(s,t,a)=>{const n=t-s;return((a-s)%n+n)%n+s};function Ht(s,t){return ut(s)?s[Gt(0,s.length,t)]:s}function Ut(s,t,a){for(let n=0;n<s.length;n++){const i=s[n];i.at>t&&i.at<a&&(pt(s,i),n--)}}function Wt(s,t,a,n,i,c){Ut(s,i,c);for(let m=0;m<t.length;m++)s.push({value:t[m],at:xt(i,c,n[m]),easing:Ht(a,m)})}function Kt(s,t){return s.at===t.at?s.value===null?1:t.value===null?-1:0:s.at-t.at}const Qt="easeInOut";function Yt(s,{defaultTransition:t={},...a}={},n,i){const c=t.duration||.3,m=new Map,p=new Map,d={},w=new Map;let b=0,k=0,A=0;for(let z=0;z<s.length;z++){const S=s[z];if(typeof S=="string"){w.set(S,k);continue}else if(!Array.isArray(S)){w.set(S.name,ss(k,S.at,b,w));continue}let[L,u,l={}]=S;l.at!==void 0&&(k=ss(k,l.at,b,w));let x=0;const f=(F,j,N,h=0,y=0)=>{const v=Zt(F),{delay:I=0,times:O=ht(v),type:T="keyframes",...Y}=j;let{ease:J=t.ease||"easeOut",duration:P}=j;const r=typeof I=="function"?I(h,y):I,E=v.length,$=ft(T)?T:i==null?void 0:i[T];if(E<=2&&$){let o=100;if(E===2&&ea(v)){const H=v[1]-v[0];o=Math.abs(H)}const M={...Y};P!==void 0&&(M.duration=jt(P));const D=_t(M,o,$);J=D.ease,P=D.duration}P??(P=c);const K=k+r,X=K+P;O.length===1&&O[0]===0&&(O[1]=1);const xe=O.length-v.length;xe>0&&gt(O,xe),v.length===1&&v.unshift(null),Wt(N,v,J,O,K,X),x=Math.max(r+P,x),A=Math.max(X,A)};if(js(L)){const F=ts(L,p);f(u,l,as("default",F))}else{const F=ws(L,u,n,d),j=F.length;for(let N=0;N<j;N++){u=u,l=l;const h=F[N],y=ts(h,p);for(const v in u)f(u[v],Jt(l,v),as(v,y),N,j)}}b=k,k+=x}return p.forEach((z,S)=>{for(const L in z){const u=z[L];u.sort(Kt);const l=[],x=[],f=[];for(let j=0;j<u.length;j++){const{at:N,value:h,easing:y}=u[j];l.push(h),x.push(yt(0,A,N)),f.push(y||"easeOut")}x[0]!==0&&(x.unshift(0),l.unshift(l[0]),f.unshift(Qt)),x[x.length-1]!==1&&(x.push(1),l.push(null)),m.has(S)||m.set(S,{keyframes:{},transition:{}});const F=m.get(S);F.keyframes[L]=l,F.transition[L]={...t,duration:A,ease:f,times:x,...a}}}),m}function ts(s,t){return!t.has(s)&&t.set(s,{}),t.get(s)}function as(s,t){return t[s]||(t[s]=[]),t[s]}function Zt(s){return Array.isArray(s)?s:[s]}function Jt(s,t){return s&&s[t]?{...s,...s[t]}:{...s}}const Xt=s=>typeof s=="number",ea=s=>s.every(Xt);function sa(s,t){return s in t}class ta extends bt{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,a){if(sa(a,t)){const n=t[a];if(typeof n=="string"||typeof n=="number")return n}}getBaseTargetFromProps(){}removeValueFromRenderState(t,a){delete a.output[t]}measureInstanceViewportBox(){return Nt()}build(t,a){Object.assign(t.output,a)}renderInstance(t,{output:a}){Object.assign(t,a)}sortInstanceNodePosition(){return 0}}function aa(s){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},a=vt(s)?new wt(t):new St(t);a.mount(s),Ce.set(s,a)}function na(s){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},a=new ta(t);a.mount(s),Ce.set(s,a)}function ra(s,t){return js(s)||typeof s=="number"||typeof s=="string"&&!qe(t)}function Ss(s,t,a,n){const i=[];if(ra(s,t))i.push(kt(s,qe(t)&&t.default||t,a&&(a.default||a)));else{const c=ws(s,t,n),m=c.length;for(let p=0;p<m;p++){const d=c[p],w=d instanceof Element?aa:na;Ce.has(d)||w(d);const b=Ce.get(d),k={...a};"delay"in k&&typeof k.delay=="function"&&(k.delay=k.delay(p,m)),i.push(...Ct(b,{...t,transition:k},{}))}}return i}function ia(s,t,a){const n=[];return Yt(s,t,a,{spring:Ft}).forEach(({keyframes:c,transition:m},p)=>{n.push(...Ss(p,c,m))}),n}function la(s){return Array.isArray(s)&&Array.isArray(s[0])}function ca(s){function t(a,n,i){let c=[];return la(a)?c=ia(a,n,s):c=Ss(a,n,i,s),new Mt(c)}return t}const pe=ca();function oa(s,t){const a=Be(s);return isNaN(t)?Js(s,NaN):(a.setDate(a.getDate()+t),a)}function da(s,t){const a=t*7;return oa(s,a)}function Le(s){const t=Be(s);return t.setDate(1),t.setHours(0,0,0,0),t}function ma(s,t){var p,d;const a=Xs(),n=a.weekStartsOn??((d=(p=a.locale)==null?void 0:p.options)==null?void 0:d.weekStartsOn)??0,i=Be(s),c=i.getDay(),m=(c<n?-7:0)+6-(c-n);return i.setDate(i.getDate()+m),i.setHours(23,59,59,999),i}function ua(s,t){return Us(s,-1)}function xa(s,t){return da(s,-1)}function pa({transactions:s,timeRange:t}){const[a,n]=g.useState("month"),{formatAmount:i}=ue(),c=s.filter(h=>h.type==="expense"),m=c.reduce((h,y)=>{const v=y.category||"other";return h[v]=(h[v]||0)+parseFloat(y.amount),h},{}),p=Object.values(m).reduce((h,y)=>h+y,0),d=Object.entries(m).sort(([,h],[,y])=>y-h).slice(0,6),w=new Date,b=Le(w),k=Le(ua(w)),A=c.filter(h=>new Date(h.date)>=b).reduce((h,y)=>h+parseFloat(y.amount),0),z=c.filter(h=>{const y=new Date(h.date);return y>=k&&y<b}).reduce((h,y)=>h+parseFloat(y.amount),0),S=z>0?(A-z)/z*100:0,L=parseInt(t),u=p/L,l=7,f=c.filter(h=>{const y=new Date(h.date),v=new Date(Date.now()-l*24*60*60*1e3);return y>=v}).reduce((h,y)=>h+parseFloat(y.amount),0)/l,F=f>u?"increasing":"stable",j=h=>{const y=["bg-primary","bg-primary/80","bg-primary/60","bg-primary/40","bg-muted-foreground/60","bg-muted-foreground/40"];return y[h%y.length]},N=h=>"";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Change"}),e.jsxs("p",{className:`text-2xl font-bold ${S>=0?"text-red-600":"text-green-600"}`,children:[S>=0?"+":"",S.toFixed(1),"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"vs last month"})]}),e.jsx("div",{className:`w-12 h-12 ${S>=0?"bg-red-100 dark:bg-red-900/20":"bg-green-100 dark:bg-green-900/20"} rounded-lg flex items-center justify-center`,children:S>=0?e.jsx(Re,{className:"text-red-600",size:24}):e.jsx($e,{className:"text-green-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Daily Average"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:i(u)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["last ",t," days"]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(hs,{className:"text-blue-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Spending Velocity"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[i(f),"/day"]}),e.jsx(V,{variant:F==="increasing"?"destructive":"secondary",className:"mt-1",children:F==="increasing"?"High":"Stable"})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:e.jsx(W,{className:"text-orange-600",size:24})})]})})]}),e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(Ws,{className:"mr-2",size:20}),"Spending by Category"]})}),e.jsx(R,{className:"px-0",children:e.jsx("div",{className:"space-y-4",children:d.map(([h,y],v)=>{const I=p>0?y/p*100:0;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"text-lg mr-2",children:N()}),e.jsx("span",{className:"font-medium capitalize",children:h.replace("_"," ")})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"font-semibold",children:i(y)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[I.toFixed(1),"%"]})]})]}),e.jsx(ps,{value:I,className:"h-2"})]},h)})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(Ve,{className:"mr-2",size:20}),"Top Spending Categories"]})}),e.jsx(R,{className:"px-0",children:e.jsx("div",{className:"space-y-3",children:d.slice(0,3).map(([h,y],v)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-3 h-3 ${j(v)} rounded-full mr-3`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium capitalize",children:h.replace("_"," ")}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[p>0?(y/p*100).toFixed(1):0,"% of spending"]})]})]}),e.jsx("p",{className:"font-bold",children:i(y)})]},h))})})]}),e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(Fe,{className:"mr-2",size:20}),"Spending Health"]})}),e.jsx(R,{className:"px-0",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ge,{className:"text-green-600 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Consistent Spending"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Good weekly patterns"})]})]}),e.jsx(V,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20",children:"Healthy"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Oe,{className:"text-yellow-600 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"High Dining Expenses"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Consider meal planning"})]})]}),e.jsx(V,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20",children:"Watch"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(te,{className:"text-blue-600 mr-3",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Savings Opportunity"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Reduce entertainment by 15%"})]})]}),e.jsx(V,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20",children:"Opportunity"})]})]})})]})]})]})}const ns=[{value:"dining",label:"Dining Out"},{value:"groceries",label:"Groceries"},{value:"transport",label:"Transportation"},{value:"utilities",label:"Utilities"},{value:"entertainment",label:"Entertainment"},{value:"shopping",label:"Shopping"},{value:"healthcare",label:"Healthcare"},{value:"education",label:"Education"},{value:"insurance",label:"Insurance"},{value:"rent",label:"Rent/Mortgage"},{value:"subscriptions",label:"Subscriptions"},{value:"other",label:"Other"}];function ha({transactions:s,timeRange:t}){const{toast:a}=rs(),{formatAmount:n}=ue(),[i,c]=g.useState(!1),[m,p]=g.useState(null),[d,w]=g.useState({category:"",monthlyLimit:""}),{data:b=[],isLoading:k}=be({queryKey:["/api/budgets"]}),A=new Date,z=Le(A),S=et(A),u=s.filter(r=>{const E=new Date(r.date);return r.type==="expense"&&E>=z&&E<=S}).reduce((r,E)=>{const $=(E.category||"other").toLowerCase();return r[$]=(r[$]||0)+parseFloat(E.amount),r},{}),l=b.map(r=>{const E=u[r.category]||0,$=parseFloat(r.monthlyLimit),K=$>0?E/$*100:0,X=K>100?"over":K>80?"warning":"good";return{...r,spent:E,limit:$,percentage:K,status:X,remaining:Math.max(0,$-E)}}).sort((r,E)=>E.percentage-r.percentage),x=l.reduce((r,E)=>r+E.limit,0),f=l.reduce((r,E)=>r+E.spent,0),F=x>0?f/x*100:0,j=ee({mutationFn:async r=>await se("POST","/api/budgets",r),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/budgets"]}),a({title:"Budget Created",description:"Your budget has been added successfully."}),c(!1),w({category:"",monthlyLimit:""})},onError:r=>{a({title:"Error",description:r.message,variant:"destructive"})}}),N=ee({mutationFn:async({id:r,data:E})=>await se("PUT",`/api/budgets/${r}`,E),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/budgets"]}),a({title:"Budget Updated",description:"Your budget has been updated successfully."}),p(null)},onError:r=>{a({title:"Error",description:r.message,variant:"destructive"})}}),h=ee({mutationFn:async r=>await se("DELETE",`/api/budgets/${r}`),onSuccess:()=>{Te.invalidateQueries({queryKey:["/api/budgets"]}),a({title:"Budget Deleted",description:"Budget has been removed."})},onError:r=>{a({title:"Error",description:r.message,variant:"destructive"})}}),y=r=>{if(r.preventDefault(),!d.category||!d.monthlyLimit){a({title:"Validation Error",description:"Please fill in all fields",variant:"destructive"});return}m?N.mutate({id:m.id,data:{monthlyLimit:d.monthlyLimit}}):j.mutate(d)},v=r=>{switch(r){case"over":return"text-red-600";case"warning":return"text-yellow-600";default:return"text-green-600"}},I=r=>{switch(r){case"over":return e.jsx(V,{variant:"destructive",children:"Over Budget"});case"warning":return e.jsx(V,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20",children:"Near Limit"});default:return e.jsx(V,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20",children:"On Track"})}},O=r=>{const E=ns.find($=>$.value===r);return E?E.label:r.charAt(0).toUpperCase()+r.slice(1)},T=[],Y=l.filter(r=>r.status==="over");Y.length>0&&T.push({type:"warning",title:"Reduce Overspending",description:`Cut back on ${Y[0].category} by ${n(Y[0].spent-Y[0].limit)}`,impact:"Get back on track this month"}),b.length===0&&T.push({type:"opportunity",title:"Start Budget Tracking",description:"Create budgets for your top spending categories",impact:"Take control of your finances"});const J=l.filter(r=>r.status==="good").length,P=l.length;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Budget"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n(x)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[b.length," ",b.length===1?"category":"categories"]})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Fe,{className:"text-blue-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Budget Used"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600",children:[F.toFixed(0),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[n(f)," spent"]})]}),e.jsx("div",{className:"w-12 h-12 bg-orange-100 dark:bg-orange-900/20 rounded-lg flex items-center justify-center",children:e.jsx(W,{className:"text-orange-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Remaining"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:n(x-f)}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"for this month"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(Me,{className:"text-green-600",size:24})})]})})]}),e.jsxs(C,{className:"p-6",children:[e.jsxs(_,{className:"px-0 pt-0 flex flex-row items-center justify-between",children:[e.jsxs(G,{className:"flex items-center",children:[e.jsx(is,{className:"mr-2",size:20}),"Your Budgets"]}),e.jsxs(De,{open:i,onOpenChange:c,children:[e.jsx(ls,{asChild:!0,children:e.jsxs(q,{size:"sm","data-testid":"button-add-budget",children:[e.jsx(cs,{className:"mr-1",size:16}),"Add Budget"]})}),e.jsxs(Ae,{children:[e.jsx(_e,{children:e.jsx(Ge,{children:"Create Budget"})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:"budget-category",children:"Category"}),e.jsxs(Ne,{value:d.category,onValueChange:r=>w({...d,category:r}),required:!0,children:[e.jsx(ve,{id:"budget-category","data-testid":"select-budget-category",children:e.jsx(we,{placeholder:"Select category"})}),e.jsx(Se,{children:ns.map(r=>e.jsx(U,{value:r.value,children:r.label},r.value))})]})]}),e.jsxs("div",{children:[e.jsx(Ee,{htmlFor:"budget-limit",children:"Monthly Limit ($)"}),e.jsx(Z,{id:"budget-limit",type:"number",step:"0.01",min:"0",placeholder:"500.00",value:d.monthlyLimit,onChange:r=>w({...d,monthlyLimit:r.target.value}),"data-testid":"input-budget-limit",required:!0})]}),e.jsxs(q,{type:"submit",disabled:j.isPending,"data-testid":"button-submit-budget",children:[j.isPending&&e.jsx(He,{className:"mr-2 h-4 w-4"}),j.isPending?"Creating...":"Create Budget"]})]})]})]})]}),e.jsx(R,{className:"px-0",children:k?e.jsx("p",{className:"text-muted-foreground",children:"Loading budgets..."}):l.length===0?e.jsx(xs,{illustration:"budgets",title:"No Budgets Created Yet",description:"Set up your first budget to track spending and stay on top of your finances.",actionLabel:"Create Your First Budget",onAction:()=>c(!0),actionTestId:"button-create-first-budget"}):e.jsx("div",{className:"space-y-4",children:l.map(r=>e.jsxs("div",{className:"space-y-2 p-4 rounded-lg border border-transparent hover:border-border hover:bg-muted/50 hover:shadow-md",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center flex-1",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:O(r.category)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n(r.spent)," of ",n(r.limit)]})]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right mr-2",children:[e.jsxs("p",{className:`font-bold ${v(r.status)}`,children:[r.percentage.toFixed(0),"%"]}),I(r.status)]}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>{p(r),w({category:r.category,monthlyLimit:r.monthlyLimit})},"data-testid":`button-edit-budget-${r.id}`,children:e.jsx(Pt,{size:16})}),e.jsx(q,{variant:"ghost",size:"icon",onClick:()=>h.mutate(r.id),"data-testid":`button-delete-budget-${r.id}`,children:e.jsx(st,{size:16,className:"text-red-600"})})]})]}),e.jsx(ps,{value:Math.min(r.percentage,100),className:"h-2"}),r.status==="good"&&r.remaining>0&&e.jsxs("p",{className:"text-xs text-green-600",children:[n(r.remaining)," remaining this month"]}),r.status==="over"&&e.jsxs("p",{className:"text-xs text-red-600",children:["Over budget by ",n(r.spent-r.limit)]})]},r.id))})})]}),m&&e.jsx(De,{open:!!m,onOpenChange:()=>p(null),children:e.jsxs(Ae,{children:[e.jsx(_e,{children:e.jsxs(Ge,{children:["Edit Budget - ",O(m.category)]})}),e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Ee,{children:"Monthly Limit"}),e.jsx(Z,{type:"number",step:"0.01",value:d.monthlyLimit,onChange:r=>w({...d,monthlyLimit:r.target.value}),"data-testid":"input-edit-budget-limit"})]}),e.jsxs(q,{type:"submit",disabled:N.isPending,"data-testid":"button-update-budget",children:[N.isPending&&e.jsx(He,{className:"mr-2 h-4 w-4"}),N.isPending?"Updating...":"Update Budget"]})]})]})}),T.length>0&&e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(ke,{className:"mr-2",size:20}),"Smart Recommendations"]})}),e.jsx(R,{className:"px-0",children:e.jsx("div",{className:"space-y-4",children:T.map((r,E)=>e.jsxs("div",{className:"flex items-start p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center mr-3 ${r.type==="warning"?"bg-red-100 dark:bg-red-900/20":r.type==="opportunity"?"bg-green-100 dark:bg-green-900/20":"bg-blue-100 dark:bg-blue-900/20"}`,children:r.type==="warning"?e.jsx(Oe,{className:"text-red-600",size:20}):r.type==="opportunity"?e.jsx(W,{className:"text-green-600",size:20}):e.jsx(gs,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}),e.jsx("p",{className:"text-xs text-green-600 font-medium mt-1",children:r.impact})]})]},E))})})]}),l.length>0&&e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(ge,{className:"mr-2",size:20}),"Budget Performance"]})}),e.jsx(R,{className:"px-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 dark:bg-green-900/20 rounded-lg",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[P>0?Math.round(J/P*100):0,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"On Track"}),e.jsxs(V,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20 mt-2",children:[J,"/",P," Categories"]})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:P}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active Budgets"}),e.jsx(V,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 mt-2",children:"Tracking"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n(x-f>0?x-f:0)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Left to Spend"}),e.jsx(V,{variant:"secondary",className:"bg-blue-100 text-blue-800 dark:bg-blue-900/20 mt-2",children:"This Month"})]})]})})]})]})}function ga({transactions:s,timeRange:t}){const[a,n]=g.useState("all"),{formatAmount:i}=ue(),c=g.useMemo(()=>s.filter(l=>l.type==="expense"),[s]),m=g.useMemo(()=>s.filter(l=>l.type==="income"),[s]),p=g.useMemo(()=>c.reduce((l,x)=>l+parseFloat(x.amount),0),[c]),d=g.useMemo(()=>m.reduce((l,x)=>l+parseFloat(x.amount),0),[m]),{thisWeekExpenses:w,lastWeekExpenses:b}=g.useMemo(()=>{const l=new Date,x=xa(l),f=c.filter(j=>new Date(j.date)>=We(l)).reduce((j,N)=>j+parseFloat(N.amount),0),F=c.filter(j=>{const N=new Date(j.date);return N>=We(x)&&N<ma(x)}).reduce((j,N)=>j+parseFloat(N.amount),0);return{thisWeekExpenses:f,lastWeekExpenses:F}},[c]),k=g.useMemo(()=>c.reduce((l,x)=>{const f=new Date(x.date).getDay(),j=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][f];return l[j]=(l[j]||0)+parseFloat(x.amount),l},{}),[c]),A=()=>{const l=[],x=(k.Saturday||0)+(k.Sunday||0),f=p-x;x>f*.4&&l.push({type:"pattern",title:"High Weekend Spending",description:"You spend 40% more on weekends. Consider planning weekend activities with a budget.",potential_saving:x*.2,action:"Set weekend spending limit",priority:"medium",icon:hs});const F=c.filter(I=>parseFloat(I.amount)<50).length,j=c.filter(I=>parseFloat(I.amount)>=50).length;F>j*2&&l.push({type:"behavior",title:"Frequent Small Purchases",description:`${F} small purchases adding up quickly.`,potential_saving:F*15,action:"Track micro-spending",priority:"high",icon:Oe});const N=c.reduce((I,O)=>{const T=O.category||"other";return I[T]=(I[T]||0)+parseFloat(O.amount),I},{}),h=Object.entries(N).reduce((I,[O,T])=>T>I.amount?{category:O,amount:T}:I,{category:"",amount:0});h.amount>p*.4&&l.push({type:"concentration",title:"Category Over-Concentration",description:`${h.category} represents ${(h.amount/p*100).toFixed(0)}% of spending.`,potential_saving:h.amount*.15,action:"Diversify spending",priority:"medium",icon:Fe});const y=d>0?(d-p)/d*100:0;y<20&&d>0&&l.push({type:"opportunity",title:"Savings Opportunity",description:`Current savings rate: ${y.toFixed(1)}%. Aim for 20%+ for financial health.`,potential_saving:d*.2-(d-p),action:"Increase savings rate",priority:"high",icon:Me});const v=b>0?(w-b)/b*100:0;return Math.abs(v)>25&&l.push({type:"trend",title:v>0?"Spending Spike":"Spending Drop",description:`${Math.abs(v).toFixed(0)}% ${v>0?"increase":"decrease"} from last week.`,potential_saving:v>0?w*.1:0,action:v>0?"Review recent purchases":"Maintain good habits",priority:v>0?"high":"low",icon:v>0?W:fe}),l.sort((I,O)=>{const T={high:3,medium:2,low:1};return T[O.priority]-T[I.priority]})},z=g.useMemo(()=>A(),[s,c,p,d,k,w,b]),S=()=>{const l=[],x=c.reduce((j,N)=>{const h=parseFloat(N.amount),y=Math.ceil(h)-h;return j+y},0);l.push({type:"automation",title:"Round-Up Savings",description:"Automatically save spare change from purchases.",benefit:`${i(x)} saved this period`,action:"Enable round-up",difficulty:"Easy"}),c.filter(j=>parseFloat(j.amount)>5&&parseFloat(j.amount)<100&&j.category==="entertainment").length>3&&l.push({type:"optimization",title:"Subscription Audit",description:"Review recurring entertainment expenses for unused services.",benefit:"Significant monthly savings",action:"Review subscriptions",difficulty:"Medium"});const F=c.filter(j=>j.category==="dining").reduce((j,N)=>j+parseFloat(N.amount),0);return F>300&&l.push({type:"lifestyle",title:"Meal Prep Opportunity",description:"High dining expenses. Meal prepping could reduce costs significantly.",benefit:`Save ${i(F*.4)}/month`,action:"Start meal prepping",difficulty:"Medium"}),l.slice(0,3)},L=g.useMemo(()=>S(),[c,p,d,s]),u=l=>{switch(l){case"high":return e.jsx(V,{variant:"destructive",children:"High Priority"});case"medium":return e.jsx(V,{variant:"secondary",className:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/20",children:"Medium"});default:return e.jsx(V,{variant:"secondary",className:"bg-green-100 text-green-800 dark:bg-green-900/20",children:"Low Priority"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Insights Generated"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:z.length}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"AI-powered"})]}),e.jsx("div",{className:"w-12 h-12 bg-blue-100 dark:bg-blue-900/20 rounded-lg flex items-center justify-center",children:e.jsx(is,{className:"text-blue-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Potential Savings"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:i(z.reduce((l,x)=>l+(x.potential_saving||0),0))}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"per month"})]}),e.jsx("div",{className:"w-12 h-12 bg-green-100 dark:bg-green-900/20 rounded-lg flex items-center justify-center",children:e.jsx(te,{className:"text-green-600",size:24})})]})}),e.jsx(C,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Weekly Trend"}),e.jsx("p",{className:`text-2xl font-bold ${w>b?"text-red-600":"text-green-600"}`,children:b>0?`${w>b?"+":""}${((w-b)/b*100).toFixed(0)}%`:"0%"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"vs last week"})]}),e.jsx("div",{className:`w-12 h-12 ${w>b?"bg-red-100 dark:bg-red-900/20":"bg-green-100 dark:bg-green-900/20"} rounded-lg flex items-center justify-center`,children:w>b?e.jsx(W,{className:"text-red-600",size:24}):e.jsx(fe,{className:"text-green-600",size:24})})]})})]}),e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(Ie,{className:"mr-2",size:20}),"AI-Powered Spending Insights"]})}),e.jsx(R,{className:"px-0",children:e.jsx("div",{className:"space-y-4",children:z.map((l,x)=>e.jsxs("div",{className:"flex items-start justify-between p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/20 rounded-full flex items-center justify-center mr-3",children:e.jsx(l.icon,{className:"text-blue-600",size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold",children:l.title}),u(l.priority)]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),l.potential_saving>0&&e.jsxs("p",{className:"text-sm text-green-600 font-medium mt-1",children:["Save ",i(l.potential_saving),"/month"]})]})]}),e.jsxs(q,{variant:"outline",size:"sm",children:[l.action,e.jsx(Ke,{className:"ml-1",size:14})]})]},x))})})]}),e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(Pe,{className:"mr-2",size:20}),"Smart Money-Saving Recommendations"]})}),e.jsx(R,{className:"px-0",children:e.jsx("div",{className:"space-y-4",children:L.map((l,x)=>e.jsxs("div",{className:"flex items-start justify-between p-4 bg-white dark:bg-gray-900 rounded-lg",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"w-10 h-10 bg-white dark:bg-gray-900 rounded-full flex items-center justify-center mr-3",children:e.jsx(ke,{className:"text-white",size:20})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold",children:l.title}),e.jsx(V,{variant:"outline",children:l.difficulty})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),e.jsx("p",{className:"text-sm text-green-600 font-medium mt-1",children:l.benefit})]})]}),e.jsxs(q,{className:"bg-primary text-primary-foreground",size:"sm",children:[l.action,e.jsx(Ke,{className:"ml-1",size:14})]})]},x))})})]}),e.jsxs(C,{className:"p-6",children:[e.jsx(_,{className:"px-0 pt-0",children:e.jsxs(G,{className:"flex items-center",children:[e.jsx(gs,{className:"mr-2",size:20}),"Your Spending Patterns"]})}),e.jsx(R,{className:"px-0",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Daily Spending Average"}),Object.entries(k).map(([l,x])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:l}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-20 h-2 bg-muted rounded-full mr-2",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${x/Math.max(...Object.values(k).map(Number))*100}%`}})}),e.jsx("span",{className:"text-sm font-medium",children:i(x)})]})]},l))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"Smart Insights Score"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Spending Awareness"}),e.jsx("span",{className:"text-sm font-medium",children:"85%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Budget Control"}),e.jsx("span",{className:"text-sm font-medium",children:"78%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Savings Potential"}),e.jsx("span",{className:"text-sm font-medium",children:"92%"})]}),e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{className:"text-sm",children:"Overall Score"}),e.jsx("span",{className:"text-sm text-green-600",children:"85/100"})]})]})]})]})})]})]})}const je=80;function fa({transaction:s,onArchive:t,onFlag:a}){const[n,i]=g.useState(!1),[c,m]=g.useState(!1),p=g.useRef(null),d=Ns(0),{formatAmount:w}=ue(),b=Xe(d,[-je,0],[1,0]),k=Xe(d,[0,je],[0,1]),A=g.useCallback(u=>{u.key==="ArrowLeft"&&t?(u.preventDefault(),pe(d,-300,{duration:.3,ease:"easeOut",onComplete:()=>{t(s.id),d.set(0)}})):u.key==="ArrowRight"&&a?(u.preventDefault(),pe(d,300,{duration:.3,ease:"easeOut",onComplete:()=>{a(s.id),d.set(0)}})):u.key==="a"&&t?(u.preventDefault(),t(s.id)):u.key==="f"&&a&&(u.preventDefault(),a(s.id))},[d,t,a,s.id]),z=u=>{switch(u){case"income":return e.jsx(W,{className:"text-green-600",size:16});case"expense":return e.jsx(fe,{className:"text-red-600",size:16});case"transfer":return e.jsx(te,{className:"text-blue-600",size:16});default:return e.jsx(te,{className:"text-gray-600",size:16})}},S=u=>{switch(u){case"income":return"text-green-600";case"expense":return"text-red-600";case"transfer":return"text-blue-600";default:return"text-gray-600"}},L=(u,l)=>{i(!1);const x=l.offset.x;x<-je&&t?pe(d,-300,{duration:.3,ease:"easeOut",onComplete:()=>{t(s.id),d.set(0)}}):x>je&&a?pe(d,300,{duration:.3,ease:"easeOut",onComplete:()=>{a(s.id),d.set(0)}}):pe(d,0,{duration:.3,ease:"easeOut"})};return e.jsxs("div",{ref:p,tabIndex:0,role:"button","aria-label":`${s.description||s.category}: ${s.type==="income"?"+":"-"}${w(Math.abs(parseFloat(s.amount)))}. Press left arrow or A to archive, right arrow or F to flag.`,onKeyDown:A,onFocus:()=>m(!0),onBlur:()=>m(!1),className:me("relative overflow-hidden rounded-lg border outline-none",c&&"ring-2 ring-blue-500 ring-offset-2 ring-offset-background"),children:[e.jsxs("div",{className:"absolute inset-0 flex items-center justify-between px-6 pointer-events-none",children:[e.jsxs(B.div,{style:{opacity:b},className:"flex items-center gap-2 text-red-600 font-medium",children:[e.jsx(Ye,{size:20}),e.jsx("span",{className:"text-sm",children:"Archive"})]}),e.jsxs(B.div,{style:{opacity:k},className:"flex items-center gap-2 text-amber-600 font-medium",children:[e.jsx("span",{className:"text-sm",children:"Flag"}),e.jsx(Je,{size:20})]})]}),e.jsxs(B.div,{drag:"x",dragConstraints:{left:-150,right:150},dragElastic:.2,onDragStart:()=>i(!0),onDragEnd:L,style:{x:d},className:me("flex items-center justify-between bg-background border-0 rounded-lg transition-colors relative z-10",n?"cursor-grabbing":"cursor-grab hover:bg-muted/50"),children:[e.jsxs("div",{className:"flex items-center min-w-0 flex-1",style:{gap:"var(--space-3)",padding:"var(--space-3)"},children:[e.jsx("div",{className:"bg-muted rounded-lg flex items-center justify-center flex-shrink-0",style:{width:"32px",height:"32px"},children:z(s.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-foreground truncate","data-testid":`text-transaction-${s.id}`,style:{fontSize:"var(--text-sm)"},title:s.description||s.category,children:s.description||s.category}),e.jsxs("div",{className:"flex items-center text-muted-foreground",style:{gap:"var(--space-2)",fontSize:"var(--text-xs)"},children:[e.jsx("span",{children:new Date(s.date).toLocaleDateString()}),e.jsx("span",{children:"•"}),e.jsx("span",{className:"capitalize",children:s.category.replace("_"," ")}),s.isArchived&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-red-600 flex items-center gap-1",children:[e.jsx(Ye,{size:12}),"Archived"]})]}),s.isFlagged&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"•"}),e.jsxs("span",{className:"text-amber-600 flex items-center gap-1",children:[e.jsx(Je,{size:12}),"Flagged"]})]})]})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",style:{paddingRight:"var(--space-3)"},children:[e.jsxs("span",{className:`font-semibold whitespace-nowrap ${S(s.type)}`,style:{fontSize:"var(--text-base)"},"data-testid":`text-amount-${s.id}`,children:[s.type==="income"?"+":"-",w(Math.abs(parseFloat(s.amount)))]}),s.goalId&&e.jsx("p",{className:"text-muted-foreground whitespace-nowrap",style:{fontSize:"var(--text-xs)"},children:"Goal contribution"})]})]})]})}const ja=Ts,ya=Es,ba=zs,ks=g.forwardRef(({className:s,...t},a)=>e.jsx(ds,{ref:a,className:me("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));ks.displayName=ds.displayName;const Cs=g.forwardRef(({className:s,children:t,...a},n)=>e.jsxs(ba,{children:[e.jsx(ks,{}),e.jsxs(os,{ref:n,className:me("fixed bottom-0 left-0 right-0 z-50 grid w-full gap-4 border-t bg-background p-6 shadow-lg","data-[state=open]:animate-in data-[state=closed]:animate-out","data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0","data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom","rounded-t-2xl","max-h-[85vh] overflow-y-auto",s),...a,children:[e.jsx("div",{className:"mx-auto w-12 h-1.5 rounded-full bg-muted-foreground/20 mb-4"}),t,e.jsxs(Ds,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground","data-testid":"button-close-sheet",children:[e.jsx(As,{className:"h-5 w-5"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Cs.displayName=os.displayName;const Na=g.forwardRef(({className:s,...t},a)=>e.jsx(ms,{ref:a,className:me("text-xl font-semibold leading-none tracking-tight",s),...t}));Na.displayName=ms.displayName;const va=g.forwardRef(({className:s,...t},a)=>e.jsx(us,{ref:a,className:me("text-sm text-muted-foreground",s),...t}));va.displayName=us.displayName;function wa({open:s,onOpenChange:t,triggerButton:a}){const[n,i]=g.useState(!1);g.useEffect(()=>{const p=()=>{i(window.innerWidth<768)};return p(),window.addEventListener("resize",p),()=>window.removeEventListener("resize",p)},[]);const c=e.jsxs(q,{className:"bg-primary hover:bg-primary/90 text-primary-foreground shadow-sm min-h-[44px] hidden md:flex","data-testid":"button-add-transaction",children:[e.jsx(cs,{className:"h-4 w-4 mr-2"}),"Add"]}),m=()=>{t&&t(!1)};return n?e.jsxs(ja,{open:s,onOpenChange:t,children:[e.jsx(ya,{asChild:!0,children:a||c}),e.jsx(Cs,{children:e.jsx(Ue,{onSuccess:m})})]}):e.jsxs(De,{open:s,onOpenChange:t,children:[e.jsx(ls,{asChild:!0,children:a||c}),e.jsx(Ae,{className:"max-w-md",children:e.jsx(Ue,{onSuccess:m})})]})}function Sa({items:s,renderItem:t,keyExtractor:a,initialVisible:n=5,showMoreLabel:i="Show more",showLessLabel:c="Show less",className:m="",emptyState:p}){const[d,w]=g.useState(!1),b=g.useRef(new Set),k=g.useRef(null),A=d?s:s.slice(0,n),z=s.length>n,S=g.useCallback(u=>b.current.has(u)?!1:(b.current.add(u),!0),[]),L=g.useCallback(()=>{w(u=>!u)},[]);return s.length===0&&p?e.jsx(e.Fragment,{children:p}):e.jsxs("div",{ref:k,className:m,children:[e.jsx(ys,{mode:"sync",children:A.map((u,l)=>{const x=a(u),f=S(x),F=d&&l>=n;return e.jsx(B.div,{initial:f?{opacity:0,y:12}:!1,animate:{opacity:1,y:0},exit:{opacity:0},transition:{duration:.2,delay:f&&F?(l-n)*.025:f?Math.min(l*.025,.15):0,ease:[.25,.1,.25,1]},children:t(u,l)},x)})}),z&&e.jsxs(B.button,{initial:{opacity:0},animate:{opacity:1},onClick:L,className:"w-full py-3 text-sm text-primary hover:text-primary/80 font-medium flex items-center justify-center gap-2 transition-colors","data-testid":"button-toggle-list-expansion",children:[e.jsx(B.span,{animate:{rotate:d?180:0},transition:{duration:.2},children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:e.jsx("path",{d:"m6 9 6 6 6-6"})})}),d?c:`${i} (${s.length-n} more)`]})]})}const ka=Bs({monthlyIncome:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number"),monthlyExpenses:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number"),monthlySavings:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number"),totalSavings:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number"),savingsGoal:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number"),emergencyFund:ae().min(1,"Required").refine(s=>!isNaN(Number(s))&&Number(s)>=0,"Must be a valid number")}),Ca=g.lazy(()=>_s(()=>import("./csv-analysis-panel-BBNc9JZB.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]))),Fa={income:["salary","freelance","investment","gift","other"],expense:["rent","utilities","groceries","dining","transport","healthcare","entertainment","shopping","other"],transfer:["savings","investment","goal_contribution"]},Ma=s=>({salary:e.jsx(Ks,{className:"w-4 h-4"}),freelance:e.jsx(ke,{className:"w-4 h-4"}),investment:e.jsx(W,{className:"w-4 h-4"}),rent:e.jsx(Hs,{className:"w-4 h-4"}),utilities:e.jsx(ke,{className:"w-4 h-4"}),groceries:e.jsx(Ot,{className:"w-4 h-4"}),dining:e.jsx(Bt,{className:"w-4 h-4"}),transport:e.jsx(Dt,{className:"w-4 h-4"}),healthcare:e.jsx(It,{className:"w-4 h-4"}),entertainment:e.jsx(Gs,{className:"w-4 h-4"}),shopping:e.jsx(bs,{className:"w-4 h-4"}),gift:e.jsx(zt,{className:"w-4 h-4"}),savings:e.jsx(Me,{className:"w-4 h-4"}),travel:e.jsx(Lt,{className:"w-4 h-4"}),coffee:e.jsx(At,{className:"w-4 h-4"}),other:e.jsx(he,{className:"w-4 h-4"})})[s.toLowerCase()]||e.jsx(te,{className:"w-4 h-4"});function Ta({value:s,prefix:t="$",decimals:a=0}){const[n,i]=g.useState(0);return g.useEffect(()=>{const p=s/60;let d=0;const w=setInterval(()=>{d+=p,d>=s?(i(s),clearInterval(w)):i(d)},1e3/60);return()=>clearInterval(w)},[s]),e.jsxs("span",{children:[t,n.toLocaleString(void 0,{minimumFractionDigits:a,maximumFractionDigits:a})]})}function ye({title:s,value:t,icon:a,trend:n,trendLabel:i,colorClass:c,bgClass:m,delay:p=0,currencyPrefix:d="$"}){return e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:p},children:e.jsxs(C,{className:"relative overflow-hidden group hover:shadow-lg transition-all duration-300 border-border/40",children:[e.jsx("div",{className:`absolute inset-0 ${m} opacity-50`}),e.jsxs(R,{className:"relative p-4 sm:p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3 sm:mb-4",children:[e.jsx("div",{className:`p-2 sm:p-2.5 rounded-xl ${m}`,children:e.jsx(a,{className:`w-4 h-4 sm:w-5 sm:h-5 ${c}`})}),n&&e.jsxs("div",{className:`flex items-center gap-1 text-xs font-medium ${n==="up"?"text-green-600":n==="down"?"text-red-600":"text-muted-foreground"}`,children:[n==="up"?e.jsx(Re,{className:"w-3 h-3"}):n==="down"?e.jsx($e,{className:"w-3 h-3"}):null,i]})]}),e.jsx("p",{className:"text-xs sm:text-sm font-medium text-muted-foreground mb-1",children:s}),e.jsx("p",{className:`text-xl sm:text-3xl font-bold tracking-tight ${c}`,children:e.jsx(Ta,{value:t,prefix:d})})]})]})})}function Ea({transactions:s}){const{formatAmount:t}=ue(),a=g.useMemo(()=>{const i={};return s.filter(c=>c.type==="expense").forEach(c=>{const m=c.category||"other";i[m]=(i[m]||0)+parseFloat(c.amount)}),Object.entries(i).map(([c,m])=>({category:c,amount:m})).sort((c,m)=>m.amount-c.amount).slice(0,5)},[s]),n=a.reduce((i,c)=>i+c.amount,0);return a.length===0?null:e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},children:e.jsxs(C,{className:"border-border/40",children:[e.jsx(_,{className:"pb-3 sm:pb-4",children:e.jsxs(G,{className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-primary"}),"Top Spending Categories"]})}),e.jsx(R,{className:"space-y-3 sm:space-y-4",children:a.map((i,c)=>{const m=n>0?i.amount/n*100:0;return e.jsxs(B.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:c*.1},className:"space-y-1.5 sm:space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs sm:text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-1.5 rounded-lg bg-muted",children:Ma(i.category)}),e.jsx("span",{className:"font-medium capitalize",children:i.category})]}),e.jsx("span",{className:"font-semibold",children:t(i.amount)})]}),e.jsx("div",{className:"relative h-2 bg-muted rounded-full overflow-hidden",children:e.jsx(B.div,{className:"absolute inset-y-0 left-0 bg-primary rounded-full",initial:{width:0},animate:{width:`${m}%`},transition:{duration:.8,delay:.2+c*.1}})}),e.jsxs("p",{className:"text-[10px] sm:text-xs text-muted-foreground text-right",children:[m.toFixed(1),"% of expenses"]})]},i.category)})})]})})}function cn(){var r,E,$,K,X,xe;const{t:s}=Is(),{currencySymbol:t}=ue(),a=Ps(),{toast:n}=rs(),[i,c]=g.useState(!1),[m,p]=g.useState("overview"),[d,w]=g.useState(!1);g.useEffect(()=>{new URLSearchParams(window.location.search).get("add")==="1"&&(c(!0),window.history.replaceState({},"","/money-tracking"))},[]);const[b,k]=g.useState("all"),[A,z]=g.useState("all"),[S,L]=g.useState("30"),{data:u,isLoading:l}=be({queryKey:["/api/transactions",b,A,S],queryFn:()=>fetch("/api/transactions?limit=100").then(o=>o.json())}),{data:x}=be({queryKey:["/api/dashboard/stats"]}),{data:f}=be({queryKey:["/api/user/financial-profile"]}),[F,j]=g.useState(!1),N=Ls({resolver:Os(ka),defaultValues:{monthlyIncome:"0",monthlyExpenses:"0",monthlySavings:"0",totalSavings:"0",savingsGoal:"0",emergencyFund:"0"},values:f!=null&&f.profile?{monthlyIncome:((r=f.profile.monthlyIncome)==null?void 0:r.toString())||"0",monthlyExpenses:((E=f.profile.monthlyExpenses)==null?void 0:E.toString())||"0",monthlySavings:(($=f.profile.monthlySavings)==null?void 0:$.toString())||"0",totalSavings:((K=f.profile.totalSavings)==null?void 0:K.toString())||"0",savingsGoal:((X=f.profile.savingsGoal)==null?void 0:X.toString())||"0",emergencyFund:((xe=f.profile.emergencyFund)==null?void 0:xe.toString())||"0"}:void 0}),h=ee({mutationFn:async o=>{const M={profile:{monthlyIncome:o.monthlyIncome,monthlyExpenses:o.monthlyExpenses,monthlySavings:o.monthlySavings,totalSavings:o.totalSavings,savingsGoal:o.savingsGoal,emergencyFund:o.emergencyFund}};return se("POST","/api/user/financial-profile",M)},onSuccess:()=>{a.invalidateQueries({queryKey:["/api/user/financial-profile"]}),a.invalidateQueries({queryKey:["/api/financial-health"]}),n({title:"Profile Updated!",description:"Your financial profile has been saved successfully."}),j(!1)},onError:()=>{n({title:"Update Failed",description:"Failed to save your profile. Please try again.",variant:"destructive"}),j(!1)}}),y=async o=>{j(!0),h.mutate(o)},v=ee({mutationFn:async()=>{const o=(u==null?void 0:u.filter(D=>D.category==="Other"||D.category==="other").map(D=>D.id))||[];if(o.length===0)throw new Error("No uncategorized transactions to fix");return await(await se("POST","/api/transactions/bulk-categorize",{transactionIds:o})).json()},onSuccess:o=>{a.invalidateQueries({queryKey:["/api/transactions"]}),n({title:"Categories Fixed",description:`Successfully categorized ${o.updated} of ${o.total} transactions using AI detection.`,variant:"default"})},onError:o=>{n({title:"Error",description:o.message||"Failed to categorize transactions",variant:"destructive"})}}),I=ee({mutationFn:async o=>await(await se("PATCH",`/api/transactions/${o}/archive`)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/transactions"]}),n({title:"Transaction Archived",description:"Transaction has been archived successfully"})},onError:o=>{n({title:"Error",description:o.message||"Failed to archive transaction",variant:"destructive"})}}),O=ee({mutationFn:async o=>await(await se("PATCH",`/api/transactions/${o}/flag`)).json(),onSuccess:()=>{a.invalidateQueries({queryKey:["/api/transactions"]}),n({title:"Transaction Flagged",description:"Transaction has been flagged for review"})},onError:o=>{n({title:"Error",description:o.message||"Failed to flag transaction",variant:"destructive"})}}),T=g.useMemo(()=>u?u.filter(o=>{const M=b==="all"||o.type===b,D=A==="all"||o.category===A,H=new Date(o.date),Fs=new Date(Date.now()-parseInt(S)*24*60*60*1e3),Ms=H>=Fs;return M&&D&&Ms}):[],[u,b,A,S]),{totalIncome:Y,totalExpenses:J,netCashFlow:P}=g.useMemo(()=>{const o=T.filter(D=>D.type==="income").reduce((D,H)=>D+parseFloat(H.amount),0),M=T.filter(D=>D.type==="expense").reduce((D,H)=>D+parseFloat(H.amount),0);return{totalIncome:o,totalExpenses:M,netCashFlow:o-M}},[T]);return l?e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border/40 sticky top-0 z-30",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 xl:px-12 py-6",children:[e.jsx("div",{className:"h-8 bg-muted/50 rounded-lg w-48 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted/50 rounded w-64 animate-pulse"})]})}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 xl:px-12 py-8",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[...Array(4)].map((o,M)=>e.jsxs(C,{className:"p-6 border-border/50",children:[e.jsx("div",{className:"h-10 w-10 bg-muted/50 rounded-xl mb-4 animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted/50 rounded w-1/2 mb-2 animate-pulse"}),e.jsx("div",{className:"h-8 bg-muted/50 rounded w-3/4 animate-pulse"})]},M))}),e.jsx(C,{className:"p-6",children:e.jsx("div",{className:"space-y-4",children:[...Array(5)].map((o,M)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-10 w-10 bg-muted/50 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"h-4 bg-muted/50 rounded w-1/3 mb-2 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted/50 rounded w-1/4 animate-pulse"})]}),e.jsx("div",{className:"h-6 bg-muted/50 rounded w-20 animate-pulse"})]},M))})})]})]}):e.jsxs("div",{className:"min-h-screen-mobile bg-background pb-24 md:pb-0",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 border-b border-border/40 sticky top-0 z-30",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-3 sm:py-4 lg:py-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-3",children:[e.jsxs(B.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},children:[e.jsx("h1",{className:"text-lg sm:text-xl lg:text-2xl xl:text-3xl font-semibold tracking-tight text-foreground truncate",children:"My Money"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block line-clamp-1",children:"Track your finances and manage your financial profile"})]}),e.jsx(B.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:e.jsx(wa,{open:i,onOpenChange:c})})]})})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs(Qs,{value:m,onValueChange:p,className:"w-full",children:[e.jsx(B.div,{className:"overflow-x-auto -mx-4 px-4 md:mx-0 md:px-0 mb-4 sm:mb-6 scrollbar-none scroll-snap-x",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:e.jsxs(Ys,{className:"inline-flex w-auto min-w-full md:grid md:w-full md:grid-cols-6 p-1 gap-1 bg-muted/50",children:[e.jsxs(ne,{value:"overview",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-overview",children:[e.jsx(te,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"Overview"})]}),e.jsxs(ne,{value:"profile",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-profile",children:[e.jsx(Rs,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"Profile"})]}),e.jsxs(ne,{value:"analytics",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-analytics",children:[e.jsx(Ve,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"Analytics"})]}),e.jsxs(ne,{value:"budget",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-budget",children:[e.jsx(Fe,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"Budget"})]}),e.jsxs(ne,{value:"insights",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-insights",children:[e.jsx(Ie,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"Insights"})]}),e.jsxs(ne,{value:"csv-analyzer",className:"flex items-center justify-center gap-1.5 px-3 sm:px-4 py-2 text-xs whitespace-nowrap min-h-[44px] touch-target data-[state=active]:bg-background data-[state=active]:shadow-sm scroll-snap-item","data-testid":"tab-csv-analyzer",children:[e.jsx(Tt,{size:14,className:"flex-shrink-0"}),e.jsx("span",{children:"CSV"})]})]})}),e.jsxs(re,{value:"overview",className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3 sm:gap-4",children:[e.jsx(ye,{title:"Total Income",value:Y,icon:W,trend:"up",trendLabel:"This period",colorClass:"text-green-600 dark:text-green-400",bgClass:"bg-green-500/10",delay:0,currencyPrefix:t}),e.jsx(ye,{title:"Total Expenses",value:J,icon:fe,trend:"down",trendLabel:"This period",colorClass:"text-red-600 dark:text-red-400",bgClass:"bg-red-500/10",delay:.1,currencyPrefix:t}),e.jsx(ye,{title:"Net Cash Flow",value:Math.abs(P),icon:P>=0?Re:$e,trend:P>=0?"up":"down",trendLabel:P>=0?"Positive":"Negative",colorClass:P>=0?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400",bgClass:P>=0?"bg-green-500/10":"bg-red-500/10",delay:.2,currencyPrefix:t}),e.jsx(ye,{title:"Total Savings",value:(x==null?void 0:x.totalSavings)||0,icon:Me,trend:"neutral",trendLabel:"All time",colorClass:"text-blue-600 dark:text-blue-400",bgClass:"bg-blue-500/10",delay:.3,currencyPrefix:t})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-4 sm:gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-4 sm:space-y-6",children:[e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2},children:e.jsxs(C,{className:"border-border/40",children:[e.jsxs("button",{className:"flex items-center justify-between w-full p-4 sm:p-6 md:cursor-default",onClick:()=>w(!d),"data-testid":"button-toggle-filters",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted",children:e.jsx(Ze,{className:"w-4 h-4"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("span",{className:"text-sm sm:text-base font-semibold",children:"Filters"}),e.jsxs("span",{className:"text-xs sm:text-sm text-muted-foreground ml-2",children:["(",T.length," transactions)"]})]})]}),e.jsx($s,{className:`w-4 h-4 md:hidden transition-transform ${d?"rotate-180":""}`})]}),e.jsx("div",{className:`${d?"block":"hidden"} md:block px-4 sm:px-6 pb-4 sm:pb-6`,children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1.5 block text-muted-foreground",children:"Time Range"}),e.jsxs(Ne,{value:S,onValueChange:L,children:[e.jsx(ve,{"data-testid":"select-time-range",className:"h-9 sm:h-10 text-xs sm:text-sm",children:e.jsx(we,{})}),e.jsxs(Se,{children:[e.jsx(U,{value:"7",children:"Last 7 days"}),e.jsx(U,{value:"30",children:"Last 30 days"}),e.jsx(U,{value:"90",children:"Last 3 months"}),e.jsx(U,{value:"365",children:"Last year"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1.5 block text-muted-foreground",children:"Type"}),e.jsxs(Ne,{value:b,onValueChange:k,children:[e.jsx(ve,{"data-testid":"select-transaction-type",className:"h-9 sm:h-10 text-xs sm:text-sm",children:e.jsx(we,{})}),e.jsxs(Se,{children:[e.jsx(U,{value:"all",children:"All Types"}),e.jsx(U,{value:"income",children:"Income"}),e.jsx(U,{value:"expense",children:"Expense"}),e.jsx(U,{value:"transfer",children:"Transfer"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs sm:text-sm font-medium mb-1.5 block text-muted-foreground",children:"Category"}),e.jsxs(Ne,{value:A,onValueChange:z,children:[e.jsx(ve,{"data-testid":"select-filter-category",className:"h-9 sm:h-10 text-xs sm:text-sm",children:e.jsx(we,{})}),e.jsxs(Se,{children:[e.jsx(U,{value:"all",children:"All Categories"}),Object.entries(Fa).map(([o,M])=>M.map(D=>e.jsx(U,{value:D,children:D.charAt(0).toUpperCase()+D.slice(1).replace("_"," ")},`${o}-${D}`)))]})]})]}),e.jsxs("div",{className:"flex items-end gap-2 col-span-2 md:col-span-1",children:[e.jsx(q,{variant:"outline",size:"sm",onClick:()=>{k("all"),z("all"),L("30")},"data-testid":"button-clear-filters",className:"text-xs h-9 sm:h-10 flex-1",children:"Clear"}),e.jsxs(q,{variant:"outline",size:"sm",onClick:()=>{const o=new URLSearchParams;b!=="all"&&o.set("type",b),A!=="all"&&o.set("category",A);const M=parseInt(S),D=new Date,H=new Date;H.setDate(H.getDate()-M),o.set("startDate",H.toISOString().split("T")[0]),o.set("endDate",D.toISOString().split("T")[0]),window.location.href=`/api/transactions/export?${o.toString()}`},"data-testid":"button-export-csv",className:"text-xs h-9 sm:h-10 flex-1",children:[e.jsx(Vs,{size:14,className:"mr-1.5"}),"Export"]})]})]})})]})}),e.jsx(ys,{mode:"wait",children:(u==null?void 0:u.filter(o=>o.category==="Other"||o.category==="other").length)>0&&e.jsx(B.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:e.jsx(C,{className:"p-4 bg-primary/5 border-primary/20",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-xl flex items-center justify-center flex-shrink-0",children:e.jsx(Pe,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-foreground flex items-center gap-2 text-sm sm:text-base",children:"AI Smart Categorization"}),e.jsxs("p",{className:"text-xs sm:text-sm text-muted-foreground",children:[u==null?void 0:u.filter(o=>o.category==="Other"||o.category==="other").length," uncategorized transactions detected"]})]})]}),e.jsx(q,{onClick:()=>v.mutate(),disabled:v.isPending,size:"sm",className:"font-medium flex-shrink-0","data-testid":"button-fix-categories",children:v.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3.5 w-3.5 border-2 border-white border-t-transparent mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Categorizing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-3.5 h-3.5 mr-1.5"}),e.jsx("span",{className:"hidden sm:inline",children:"Fix Categories"}),e.jsx("span",{className:"sm:hidden",children:"Fix"})]})})]})})})}),e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3},children:e.jsxs(C,{className:"border-border/40",children:[e.jsx(_,{className:"pb-3 sm:pb-4 px-4 sm:px-6 pt-4 sm:pt-6",children:e.jsxs(G,{className:"text-sm sm:text-base font-semibold flex items-center gap-2",children:[e.jsx(he,{className:"w-4 h-4 text-primary"}),"Recent Transactions"]})}),e.jsx(R,{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:T.length===0?(u==null?void 0:u.length)===0?e.jsx(xs,{illustration:"transactions",title:"No Transactions Yet",description:"Start tracking your financial journey by adding your first transaction. Every dollar tracked brings you closer to your goals.",actionLabel:"Add Your First Transaction",onAction:()=>c(!0),actionTestId:"button-add-first-transaction"}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 mx-auto bg-muted rounded-2xl flex items-center justify-center mb-4",children:e.jsx(Ze,{className:"w-8 h-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-base font-semibold mb-2",children:"No transactions match your filters"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-6 max-w-md mx-auto",children:"Try adjusting your date range or category filters to see more transactions"}),e.jsx(q,{variant:"outline",onClick:()=>{k("all"),z("all"),L("30")},children:"Clear Filters"})]}):e.jsx(Sa,{items:T,keyExtractor:o=>o.id,initialVisible:10,showMoreLabel:"View all transactions",showLessLabel:"Show fewer transactions",className:"space-y-2 sm:space-y-3",renderItem:o=>e.jsx(fa,{transaction:o,onArchive:M=>I.mutate(M),onFlag:M=>O.mutate(M)})})})]})})]}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsx(Ea,{transactions:T}),e.jsx(B.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.4},children:e.jsxs(C,{className:"border-border/40 p-4 sm:p-6",children:[e.jsxs("h3",{className:"text-sm sm:text-base font-semibold mb-4 flex items-center gap-2",children:[e.jsx(Ie,{className:"w-4 h-4 text-amber-500"}),"Quick Tips"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx(ge,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Track expenses daily for accurate budgeting"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx(ge,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Review spending categories weekly"})]}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-muted/50",children:[e.jsx(ge,{className:"w-4 h-4 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground",children:"Set budget limits for each category"})]})]})]})})]})]})]}),e.jsx(re,{value:"profile",className:"space-y-6",children:e.jsxs(C,{className:"border-border/40",children:[e.jsxs(_,{children:[e.jsxs(G,{className:"flex items-center gap-2",children:[e.jsx(he,{className:"h-5 w-5"}),"Financial Overview"]}),e.jsx(qs,{children:"Enter your financial details to get personalized AI advice. These values power all your recommendations."})]}),e.jsxs(R,{children:[e.jsx(Zs,{...N,children:e.jsxs("form",{onSubmit:N.handleSubmit(y),className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6",children:[e.jsx(ie,{control:N.control,name:"monthlyIncome",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Monthly Income"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(te,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"5000","data-testid":"input-monthly-income"})]})}),e.jsx(de,{})]})}),e.jsx(ie,{control:N.control,name:"monthlyExpenses",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Monthly Expenses"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(fe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"3000","data-testid":"input-monthly-expenses"})]})}),e.jsx(de,{})]})}),e.jsx(ie,{control:N.control,name:"monthlySavings",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Monthly Savings"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"2000","data-testid":"input-monthly-savings"})]})}),e.jsx(de,{})]})}),e.jsx(ie,{control:N.control,name:"totalSavings",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Total Savings"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(he,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"50000","data-testid":"input-total-savings"})]})}),e.jsx(de,{})]})}),e.jsx(ie,{control:N.control,name:"savingsGoal",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Savings Goal"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(Qe,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"100000","data-testid":"input-savings-goal"})]})}),e.jsx(de,{})]})}),e.jsx(ie,{control:N.control,name:"emergencyFund",render:({field:o})=>e.jsxs(le,{children:[e.jsx(ce,{children:"Emergency Fund"}),e.jsx(oe,{children:e.jsxs("div",{className:"relative",children:[e.jsx(bs,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{...o,type:"number",step:"0.01",className:"pl-9",placeholder:"18000","data-testid":"input-emergency-fund"})]})}),e.jsx(de,{})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(q,{type:"submit",disabled:F,"data-testid":"button-save-profile",children:F?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mr-2 h-4 w-4 animate-spin rounded-full border-2 border-current border-t-transparent"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Et,{className:"mr-2 h-4 w-4"}),"Save Profile"]})})})]})}),(f==null?void 0:f.profile)&&e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(C,{className:"border-border/40",children:e.jsx(R,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monthly Net"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",(parseFloat(f.profile.monthlyIncome||"0")-parseFloat(f.profile.monthlyExpenses||"0")).toLocaleString()]})]}),e.jsx(W,{className:"h-8 w-8 text-green-600 dark:text-green-400"})]})})}),e.jsx(C,{className:"border-border/40",children:e.jsx(R,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Savings Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(()=>{const o=parseFloat(f.profile.monthlyIncome||"0"),M=parseFloat(f.profile.monthlySavings||"0");return o===0?"0.0":(M/o*100).toFixed(1)})(),"%"]})]}),e.jsx(he,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})}),e.jsx(C,{className:"border-border/40",children:e.jsx(R,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Goal Progress"}),e.jsxs("p",{className:"text-2xl font-bold",children:[(()=>{const o=parseFloat(f.profile.totalSavings||"0"),M=parseFloat(f.profile.savingsGoal||"0");return M===0?"0.0":(o/M*100).toFixed(1)})(),"%"]})]}),e.jsx(Qe,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"})]})})})]})]})]})}),e.jsx(re,{value:"analytics",className:"space-y-6",children:e.jsx(pa,{transactions:T||[],timeRange:S})}),e.jsx(re,{value:"budget",className:"space-y-6",children:e.jsx(ha,{transactions:T||[],timeRange:S})}),e.jsx(re,{value:"insights",className:"space-y-6",children:e.jsx(ga,{transactions:T||[],timeRange:S})}),e.jsx(re,{value:"csv-analyzer",className:"space-y-6",children:e.jsx(g.Suspense,{fallback:e.jsx(C,{className:"p-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-primary border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading CSV Analyzer..."})]})}),children:e.jsx(Ca,{})})})]})})]})}export{cn as default};
