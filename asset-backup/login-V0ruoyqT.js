import{a8 as p,p as b,r,y as N,j as e,_ as n,H as o,bs as w}from"./index-NNgTI0RQ.js";import{d as v,e as k,f as y}from"./index-DdC2qtWE.js";import{l as L}from"./5-removebg-preview_1761748275134-Del8-H30.js";import{A as C}from"./arrow-left-CwkJQlvl.js";import{L as S}from"./lock-C-52eLxF.js";import{S as A}from"./shield-DTrErQQt.js";import{E}from"./eye-_v_8ucD7.js";function z(){const{t:s}=p(),[,l]=b(),[i,c]=r.useState(null),[d,m]=r.useState(!0),{data:t,isLoading:x,isError:h}=N({queryKey:["/api/auth/providers"],retry:2});r.useEffect(()=>{fetch("/api/auth/status").then(a=>a.json()).then(a=>{a.authenticated&&l("/")}).catch(a=>{console.warn("[Auth] Failed to check auth status:",a.message)}).finally(()=>m(!1))},[l]);const u=()=>{c("google"),window.location.assign("/api/auth/google")},g=()=>{c("facebook"),window.location.assign("/api/auth/facebook")},j=()=>{c("apple");const a=document.createElement("form");a.method="POST",a.action="/api/auth/apple",document.body.appendChild(a),a.submit()},f=(t==null?void 0:t.google)||(t==null?void 0:t.facebook)||(t==null?void 0:t.apple);return d||x?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsx(n,{className:"w-8 h-8 animate-spin text-slate-400"})}):e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-slate-900 to-slate-950"}),e.jsxs("div",{className:"relative min-h-screen flex flex-col",children:[e.jsx("header",{className:"px-6 py-4",children:e.jsxs("button",{onClick:()=>l("/"),className:"inline-flex items-center gap-2 text-sm text-slate-400 hover:text-white transition-colors","data-testid":"button-back-home",children:[e.jsx(C,{className:"w-4 h-4"}),s("login.backToHome")]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-6",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-10",children:[e.jsx("div",{className:"inline-flex items-center justify-center mb-6",children:e.jsx("img",{src:L,alt:"Twealth",className:"w-14 h-14 object-contain"})}),e.jsx("h1",{className:"text-3xl font-bold tracking-tight text-white mb-2",children:s("login.title")}),e.jsx("p",{className:"text-slate-400",children:s("login.subtitle")})]}),e.jsx("div",{className:"rounded-2xl border border-slate-700 bg-slate-900 shadow-xl",children:e.jsxs("div",{className:"p-8 space-y-4",children:[h?e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-red-400 mb-2",children:s("login.unableToLoad")}),e.jsx("p",{className:"text-sm text-slate-500",children:s("login.refreshPage")}),e.jsx(o,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"mt-4 border-slate-600 text-slate-300",children:s("login.refresh")})]}):f?e.jsxs(e.Fragment,{children:[(t==null?void 0:t.google)&&e.jsxs(o,{onClick:u,disabled:i!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-google-login",children:[i==="google"?e.jsx(n,{className:"mr-3 h-4 w-4 animate-spin"}):e.jsx(v,{className:"mr-3 h-4 w-4"}),s("login.google")]}),(t==null?void 0:t.apple)&&e.jsxs(o,{onClick:j,disabled:i!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-apple-login",children:[i==="apple"?e.jsx(n,{className:"mr-3 h-4 w-4 animate-spin"}):e.jsx(k,{className:"mr-3 h-4 w-4"}),s("login.apple")]}),(t==null?void 0:t.facebook)&&e.jsxs(o,{onClick:g,disabled:i!==null,variant:"outline",className:"w-full h-12 font-medium border-slate-600 bg-slate-800 hover:bg-slate-700 text-white rounded-xl","data-testid":"button-facebook-login",children:[i==="facebook"?e.jsx(n,{className:"mr-3 h-4 w-4 animate-spin"}):e.jsx(y,{className:"mr-3 h-4 w-4 text-[#1877F2]"}),s("login.facebook")]})]}):e.jsxs("div",{className:"text-center py-6",children:[e.jsx("p",{className:"text-slate-400 mb-2",children:s("login.authConfiguring")}),e.jsx("p",{className:"text-sm text-slate-500",children:s("login.checkBackSoon")})]}),e.jsxs("div",{className:"relative my-6",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx(w,{className:"w-full bg-slate-700"})}),e.jsx("div",{className:"relative flex justify-center text-xs",children:e.jsx("span",{className:"bg-slate-900 px-3 text-slate-500",children:s("login.enterpriseSecurity")})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 pt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:e.jsx(S,{className:"w-4 h-4 text-slate-400"})}),e.jsx("p",{className:"text-xs text-slate-400",children:s("login.encryption")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:e.jsx(A,{className:"w-4 h-4 text-slate-400"})}),e.jsx("p",{className:"text-xs text-slate-400",children:s("login.soc2")})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center mx-auto mb-2",children:e.jsx(E,{className:"w-4 h-4 text-slate-400"})}),e.jsx("p",{className:"text-xs text-slate-400",children:s("login.gdpr")})]})]})]})}),e.jsxs("div",{className:"mt-8 space-y-4",children:[e.jsxs("p",{className:"text-center text-sm text-slate-400",children:[s("login.newToTwealth")," ",e.jsx("button",{onClick:()=>l("/welcome"),className:"text-white font-medium hover:underline","data-testid":"link-learn-more",children:s("login.learnMore")})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-slate-500",children:[e.jsx("button",{onClick:()=>l("/terms"),className:"hover:text-slate-300 transition-colors","data-testid":"link-terms",children:s("login.terms")}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),e.jsx("button",{onClick:()=>l("/privacy"),className:"hover:text-slate-300 transition-colors","data-testid":"link-privacy",children:s("login.privacy")}),e.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-600"}),e.jsx("span",{children:s("login.copyright")})]})]})]})})]})]})}export{z as default};
