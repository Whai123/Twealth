import{r as u,q as te,ae,aj as ye,L as fe,M as Ne,N as we,z as L,B as A,j as e,ak as w,Z as V,al as H,K as B,H as b,am as K,a5 as T,an as Ce,ao as Se,a6 as ke,y as Ge,O as k,s as D,ap as Y,aq as _,t as I,v as F,w as $,x as E,ar as U,$ as W,a0 as Z,a1 as J,a2 as X,a3 as S,V as re,Q as Te,S as De,as as Ie,at as Fe,au as $e,av as O,aw as Ee,Y as Me}from"./index-NNgTI0RQ.js";import{T as Pe}from"./textarea-CFY__GU9.js";import{C as R}from"./car-CQIjq09O.js";import{P as z}from"./piggy-bank-Bku1OXn_.js";import{m as f}from"./proxy-C8xz_zGI.js";import{T as Oe}from"./trending-up-BnP5NHLE.js";import{A as qe}from"./index-BV8oB33o.js";import{C as Le}from"./copy-CwyWwbxF.js";import{S as Ae}from"./sparkles-yxnOzOhM.js";import{C as Ve}from"./calculator-DIBepEto.js";import{E as Ue}from"./ellipsis-Darsu7If.js";import{U as ee}from"./user-plus-BpZZgIzm.js";import{T as He}from"./trash-2-iBqgHWxY.js";const Be=we({name:T().min(1,"Group name is required"),description:T().optional(),category:K(["house","car","savings","other"]).default("other"),budget:Ce(t=>t===""||t===void 0||t===null?void 0:String(t),T().optional()),color:T().default("#3B82F6"),status:K(["active","planning","archived"]).default("active")});function se({onSuccess:t}){const[a,p]=u.useState(!1),{toast:r}=te(),i=ae(),{user:o,isLoading:n}=ye(),{register:c,handleSubmit:m,setValue:y,watch:g,formState:{errors:j}}=fe({resolver:Ne(Be),defaultValues:{category:"other",color:"#3B82F6",status:"active"}}),v=L({mutationFn:l=>A("POST","/api/groups",l),onSuccess:()=>{i.invalidateQueries({queryKey:["/api/groups"]}),r({title:"Group created",description:"Your shared goal group has been created successfully."}),t==null||t()},onError:l=>{r({title:"Error",description:l.message,variant:"destructive"})},onSettled:()=>{p(!1)}}),h=l=>{if(!o){r({title:"Error",description:"You must be logged in to create a group.",variant:"destructive"});return}p(!0),v.mutate(l)},x=[{value:"house",label:"House / Property",icon:H,description:"Down payment, renovation"},{value:"car",label:"Vehicle",icon:R,description:"Car, motorcycle, boat"},{value:"savings",label:"Group Savings",icon:z,description:"Vacation, event, gift"},{value:"other",label:"Other Goal",icon:B,description:"Custom shared goal"}],G=g("category");return e.jsxs("form",{onSubmit:m(h),className:"space-y-4 pt-2",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"name",children:"Group Name"}),e.jsx(V,{id:"name",...c("name"),placeholder:"e.g., Beach House Fund, Tesla Model 3",className:"h-11","data-testid":"input-group-name"}),j.name&&e.jsx("p",{className:"text-sm text-destructive mt-1",children:j.name.message})]}),e.jsxs("div",{children:[e.jsx(w,{children:"Goal Category"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-1.5",children:x.map(l=>{const M=l.icon,N=G===l.value;return e.jsxs("button",{type:"button",onClick:()=>y("category",l.value),className:`p-3 rounded-lg border text-left transition-all ${N?"border-primary bg-primary/5 ring-1 ring-primary":"border-border hover:border-primary/50"}`,"data-testid":`button-category-${l.value}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:`w-4 h-4 ${N?"text-primary":"text-muted-foreground"}`}),e.jsx("span",{className:"text-sm font-medium",children:l.label})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-0.5",children:l.description})]},l.value)})})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"budget",children:"Target Amount (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(V,{id:"budget",type:"number",...c("budget"),placeholder:"0.00",className:"h-11 pl-7","data-testid":"input-group-budget"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Set a target to track progress toward your goal"})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"description",children:"Description (Optional)"}),e.jsx(Pe,{id:"description",...c("description"),placeholder:"Describe your shared goal...",rows:2,"data-testid":"textarea-group-description"})]}),e.jsx("div",{className:"flex justify-end pt-2",children:e.jsx(b,{type:"submit",disabled:a||n||!o,className:"min-h-[44px] min-w-[120px]","data-testid":"button-submit-group",children:a?"Creating...":n?"Loading...":"Create Group"})})]})}function ie({value:t,formatFn:a}){const[p,r]=u.useState(0);return u.useEffect(()=>{const n=t/40;let c=0;const m=setInterval(()=>{c+=n,c>=t?(r(t),clearInterval(m)):r(c)},800/40);return()=>clearInterval(m)},[t]),e.jsx("span",{children:a(Math.round(p))})}function Re({progress:t,size:a=60}){const[p,r]=u.useState(0),i=5,o=(a-i)/2,n=o*2*Math.PI,c=n-p/100*n;return u.useEffect(()=>{const m=setTimeout(()=>{r(t)},300);return()=>clearTimeout(m)},[t]),e.jsxs("div",{className:"relative",style:{width:a,height:a},children:[e.jsxs("svg",{className:"transform -rotate-90",width:a,height:a,children:[e.jsx("circle",{className:"stroke-muted",strokeWidth:i,fill:"transparent",r:o,cx:a/2,cy:a/2}),e.jsx("circle",{className:"stroke-primary transition-all duration-1000 ease-out",strokeWidth:i,strokeLinecap:"round",fill:"transparent",r:o,cx:a/2,cy:a/2,style:{strokeDasharray:n,strokeDashoffset:c}})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-xs font-bold",children:[Math.round(p),"%"]})})]})}function ze({totalAmount:t,memberCount:a,onClose:p,formatAmount:r}){const[i,o]=u.useState("equal"),[n,c]=u.useState({}),m=a>0?t/a:0,y=(v,h)=>{c(x=>({...x,[v]:parseFloat(h)||0}))},g=Object.values(n).reduce((v,h)=>v+h,0),j=t-g;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-primary/5 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Amount"}),e.jsx("p",{className:"text-2xl font-bold text-primary",children:r(t)})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Members"}),e.jsx("p",{className:"text-2xl font-bold",children:a})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:i==="equal"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>o("equal"),children:"Equal Split"}),e.jsx(b,{variant:i==="custom"?"default":"outline",size:"sm",className:"flex-1",onClick:()=>o("custom"),children:"Custom Split"})]}),i==="equal"?e.jsxs("div",{className:"p-4 bg-muted/50 rounded-xl",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Each person pays:"}),e.jsx("p",{className:"text-3xl font-bold text-primary",children:r(m)})]}):e.jsxs("div",{className:"space-y-3",children:[[...Array(a)].map((v,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center text-xs font-medium",children:h+1}),e.jsx(V,{type:"number",placeholder:"0.00",className:"flex-1",value:n[h]||"",onChange:x=>y(h,x.target.value)})]},h)),j!==0&&e.jsx("p",{className:`text-sm ${j>0?"text-amber-600":"text-red-600"}`,children:j>0?`${r(j)} remaining to assign`:`${r(Math.abs(j))} over the total`})]}),e.jsx(b,{onClick:p,variant:"outline",className:"w-full",children:"Done"})]})}function Qe({group:t,onInvite:a,onDelete:p,onContribute:r,formatAmount:i,delay:o=0}){const n=parseFloat(t.budget||"0"),c=parseFloat(t.currentAmount||"0"),m=n>0?Math.min(100,c/n*100):0,y=Math.max(0,n-c),g=t.memberCount||1,v=(x=>{switch(x){case"house":return H;case"car":return R;case"savings":return z;default:return B}})(t.category),h=x=>{switch(x){case"house":return"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400";case"car":return"bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400";case"savings":return"bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400";default:return"bg-primary/10 text-primary"}};return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},children:e.jsxs(k,{className:"group overflow-hidden border-border/40 hover:shadow-lg hover:border-border transition-all duration-300","data-testid":`card-group-${t.id}`,children:[e.jsx("div",{className:"h-1 bg-gradient-to-r from-primary/50 via-primary to-primary/50 transition-all duration-500",style:{clipPath:`inset(0 ${100-m}% 0 0)`}}),e.jsx(Te,{className:"p-4 sm:p-5 pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[e.jsx("div",{className:`w-11 h-11 sm:w-12 sm:h-12 rounded-xl flex items-center justify-center flex-shrink-0 ${h(t.category)}`,children:e.jsx(v,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx(De,{className:"text-base sm:text-lg font-semibold truncate","data-testid":`text-group-name-${t.id}`,children:t.name}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground mt-0.5",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(U,{className:"w-3 h-3"}),e.jsxs("span",{children:[g," member",g!==1?"s":""]})]}),t.category&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"-"}),e.jsx("span",{className:"capitalize",children:t.category})]})]})]})]}),e.jsxs(Ie,{children:[e.jsx(Fe,{asChild:!0,children:e.jsx(b,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx(Ue,{className:"w-4 h-4"})})}),e.jsxs($e,{align:"end",children:[e.jsxs(O,{onClick:a,children:[e.jsx(ee,{className:"w-4 h-4 mr-2"}),"Invite Members"]}),e.jsxs(O,{onClick:()=>{},children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Settings"]}),e.jsxs(O,{onClick:p,className:"text-destructive",children:[e.jsx(He,{className:"w-4 h-4 mr-2"}),"Delete Group"]})]})]})]})}),e.jsxs(re,{className:"p-4 sm:p-5 pt-0 space-y-4",children:[n>0&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Re,{progress:m,size:64}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-1",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-lg sm:text-xl font-bold text-primary",children:e.jsx(ie,{value:c,formatFn:i})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["/ ",i(n)]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i(y)," remaining"]}),g>1&&y>0&&e.jsxs("p",{className:"text-xs text-primary font-medium",children:[i(Math.ceil(y/g)),"/person needed"]})]})]}),t.description&&e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(b,{variant:"outline",size:"sm",className:"flex-1 h-10 text-xs sm:text-sm",onClick:a,children:[e.jsx(ee,{className:"w-3.5 h-3.5 mr-1.5"}),"Invite"]}),e.jsxs(b,{size:"sm",className:"flex-1 h-10 text-xs sm:text-sm",onClick:r,"data-testid":`button-contribute-${t.id}`,children:[e.jsx(Me,{className:"w-3.5 h-3.5 mr-1.5"}),"Contribute"]})]})]})]})})}function q({title:t,value:a,icon:p,colorClass:r,formatAmount:i,delay:o=0}){return e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:o},children:e.jsx(k,{className:"border-border/40",children:e.jsx(re,{className:"p-4 sm:p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2.5 rounded-xl ${r.replace("text-","bg-").replace("600","100").replace("400","900/30")}`,children:e.jsx(p,{className:`w-4 h-4 sm:w-5 sm:h-5 ${r}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:t}),e.jsx("p",{className:`text-lg sm:text-xl font-bold ${r}`,children:typeof a=="number"&&i?e.jsx(ie,{value:a,formatFn:i}):a})]})]})})})})}function ls(){var Q;const[t,a]=u.useState(!1),[p,r]=u.useState(!1),[i,o]=u.useState(!1),[n,c]=u.useState(null),[m,y]=u.useState(null),[g,j]=u.useState("member"),[v,h]=u.useState("7"),[x,G]=u.useState(null),{toast:l}=te(),M=ae();Se();const{formatAmount:N}=ke();u.useEffect(()=>{new URLSearchParams(window.location.search).get("create")==="1"&&(a(!0),window.history.replaceState({},"","/groups"))},[]);const{data:ne,isLoading:le}=Ge({queryKey:["/api/groups"],queryFn:()=>fetch("/api/groups").then(s=>s.json())}),oe=L({mutationFn:s=>A("DELETE",`/api/groups/${s}`),onSuccess:()=>{M.invalidateQueries({queryKey:["/api/groups"]}),l({title:"Group deleted",description:"The group has been removed"})},onError:s=>{l({title:"Error",description:s.message,variant:"destructive"})}}),P=L({mutationFn:async({groupId:s,role:d,expiry:je})=>{const ve=parseInt(je),be=new Date(Date.now()+ve*24*60*60*1e3);return await(await A("POST",`/api/groups/${s}/invites`,{role:d,expiresAt:be.toISOString()})).json()},onSuccess:s=>{G(s),l({title:"Invite created",description:"Share the link with your group members"})},onError:s=>{l({title:"Error",description:s.message,variant:"destructive"})}}),ce=s=>{confirm("Are you sure you want to delete this group?")&&oe.mutate(s)},de=s=>{c(s),G(null),r(!0)},me=()=>{n&&P.mutate({groupId:n,role:g,expiry:v})},xe=()=>{var s;if((s=x==null?void 0:x.invite)!=null&&s.token){const d=`${window.location.origin}/invite/${x.invite.token}`;navigator.clipboard.writeText(d),l({title:"Link copied",description:"Share this link to invite members"})}},ue=s=>{y(s),o(!0)};if(le)return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur border-b border-border/40 sticky top-0 z-30",children:e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:[e.jsx("div",{className:"h-8 bg-muted/50 rounded-lg w-48 mb-2 animate-pulse"}),e.jsx("div",{className:"h-4 bg-muted/50 rounded w-64 animate-pulse"})]})}),e.jsxs("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6",children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[...Array(3)].map((s,d)=>e.jsx(k,{className:"p-5",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-11 h-11 rounded-xl bg-muted/50 animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-3 bg-muted/50 rounded w-20 animate-pulse"}),e.jsx("div",{className:"h-5 bg-muted/50 rounded w-24 animate-pulse"})]})]})},d))}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[...Array(3)].map((s,d)=>e.jsxs(k,{className:"p-5",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-muted/50 animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-5 bg-muted/50 rounded w-3/4 animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted/50 rounded w-1/2 animate-pulse"})]})]}),e.jsx("div",{className:"h-16 bg-muted/50 rounded-lg animate-pulse mb-4"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"h-10 bg-muted/50 rounded flex-1 animate-pulse"}),e.jsx("div",{className:"h-10 bg-muted/50 rounded flex-1 animate-pulse"})]})]},d))})]})]});const C=ne||[],pe=C.reduce((s,d)=>s+parseFloat(d.budget||"0"),0),he=C.reduce((s,d)=>s+parseFloat(d.currentAmount||"0"),0),ge=C.reduce((s,d)=>s+(d.memberCount||1),0);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-background/95 backdrop-blur border-b border-border/40 sticky top-0 z-30",children:e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-3 sm:gap-4",children:[e.jsxs(f.div,{className:"flex-1 min-w-0",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4},children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-semibold tracking-tight text-foreground",children:"Shared Goals"}),e.jsx("p",{className:"text-xs sm:text-sm text-muted-foreground mt-0.5 sm:mt-1 hidden sm:block",children:"Split costs and track contributions with your group"})]}),e.jsx(f.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3,delay:.2},children:e.jsxs(D,{open:t,onOpenChange:a,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(b,{className:"min-h-[44px] shadow-sm","data-testid":"button-create-group",children:[e.jsx(_,{size:18,className:"sm:mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"New Group"}),e.jsx("span",{className:"sm:hidden",children:"New"})]})}),e.jsxs(I,{className:"w-[95vw] max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx($,{children:"Create Shared Goal Group"}),e.jsx(E,{children:"Create a group to track shared expenses like a house, car, or savings goal"})]}),e.jsx(se,{onSuccess:()=>a(!1)})]})]})})]})})}),e.jsx("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-4 sm:py-6",children:C.length===0?e.jsxs(f.div,{className:"text-center py-12 sm:py-20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(U,{className:"w-10 h-10 sm:w-12 sm:h-12 text-primary"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-semibold mb-3",children:"Start a Shared Goal"}),e.jsx("p",{className:"text-muted-foreground mb-8 max-w-md mx-auto text-sm sm:text-base",children:"Create a group to split costs for big purchases like a house, car, or vacation. Track everyone's contributions in one place."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto mb-8",children:[{icon:H,title:"House Down Payment",desc:"Split with partner or family",color:"text-blue-600 dark:text-blue-400"},{icon:R,title:"Car Purchase",desc:"Share with co-buyers",color:"text-amber-600 dark:text-amber-400"},{icon:z,title:"Group Savings",desc:"Vacation, event, or gift",color:"text-green-600 dark:text-green-400"}].map((s,d)=>e.jsx(f.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.2+d*.1},children:e.jsxs(k,{className:"p-4 text-center hover:shadow-md transition-shadow border-border/40",children:[e.jsx(s.icon,{className:`w-8 h-8 mx-auto mb-2 ${s.color}`}),e.jsx("h4",{className:"font-medium text-sm",children:s.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:s.desc})]})},s.title))}),e.jsx(f.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.4,delay:.5},children:e.jsxs(D,{open:t,onOpenChange:a,children:[e.jsx(Y,{asChild:!0,children:e.jsxs(b,{size:"lg",className:"min-h-[48px]","data-testid":"button-create-first-group",children:[e.jsx(_,{size:20,className:"mr-2"}),"Create Your First Group"]})}),e.jsxs(I,{className:"w-[95vw] max-w-lg max-h-[90vh] overflow-y-auto",children:[e.jsxs(F,{children:[e.jsx($,{children:"Create Shared Goal Group"}),e.jsx(E,{children:"Create a group to track shared expenses like a house, car, or savings goal"})]}),e.jsx(se,{onSuccess:()=>a(!1)})]})]})})]}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-3 sm:gap-4",children:[e.jsx(q,{title:"Total Target",value:pe,icon:B,colorClass:"text-primary",formatAmount:N,delay:0}),e.jsx(q,{title:"Total Saved",value:he,icon:Oe,colorClass:"text-green-600 dark:text-green-400",formatAmount:N,delay:.1}),e.jsx(q,{title:"Total Members",value:`${ge}`,icon:U,colorClass:"text-blue-600 dark:text-blue-400",delay:.2})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.jsx(qe,{mode:"popLayout",children:C.map((s,d)=>e.jsx(Qe,{group:s,onInvite:()=>de(s.id),onDelete:()=>ce(s.id),onContribute:()=>ue(s),formatAmount:N,delay:d*.1},s.id))})})]})}),e.jsx(D,{open:p,onOpenChange:r,children:e.jsxs(I,{className:"w-[95vw] max-w-md",children:[e.jsxs(F,{children:[e.jsx($,{children:"Invite Members"}),e.jsx(E,{children:"Generate a link to invite others to this group"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(w,{htmlFor:"invite-role",className:"text-sm font-medium",children:"Role"}),e.jsxs(W,{value:g,onValueChange:j,children:[e.jsx(Z,{id:"invite-role",className:"h-11 mt-1.5","data-testid":"select-invite-role",children:e.jsx(J,{})}),e.jsxs(X,{children:[e.jsx(S,{value:"member",children:"Member"}),e.jsx(S,{value:"admin",children:"Admin"})]})]})]}),e.jsxs("div",{children:[e.jsx(w,{htmlFor:"invite-expiry",className:"text-sm font-medium",children:"Link Expires In"}),e.jsxs(W,{value:v,onValueChange:h,children:[e.jsx(Z,{id:"invite-expiry",className:"h-11 mt-1.5","data-testid":"select-invite-expiry",children:e.jsx(J,{})}),e.jsxs(X,{children:[e.jsx(S,{value:"1",children:"1 day"}),e.jsx(S,{value:"7",children:"7 days"}),e.jsx(S,{value:"30",children:"30 days"})]})]})]}),x?e.jsxs(f.div,{className:"space-y-3",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"p-4 bg-muted/50 rounded-xl border border-border/40",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Invite Link"}),e.jsx("p",{className:"text-sm font-mono break-all text-foreground",children:`${window.location.origin}/invite/${(Q=x.invite)==null?void 0:Q.token}`})]}),e.jsxs(b,{onClick:xe,className:"w-full min-h-[44px]",children:[e.jsx(Le,{className:"w-4 h-4 mr-2"}),"Copy Link"]})]}):e.jsx(b,{onClick:me,className:"w-full min-h-[44px]",disabled:P.isPending,children:P.isPending?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Generate Invite Link"]})})]})]})}),e.jsx(D,{open:i,onOpenChange:o,children:e.jsxs(I,{className:"w-[95vw] max-w-md",children:[e.jsxs(F,{children:[e.jsxs($,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Split Calculator"]}),e.jsx(E,{children:"Calculate how much each person needs to contribute"})]}),m&&e.jsx(ze,{totalAmount:parseFloat(m.budget||"0")-parseFloat(m.currentAmount||"0"),memberCount:m.memberCount||1,onClose:()=>o(!1),formatAmount:N})]})})]})}export{ls as default};
